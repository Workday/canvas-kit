"use strict";(globalThis.webpackChunkcanvas_kit=globalThis.webpackChunkcanvas_kit||[]).push([[4638],{"./modules/react/popup/stories/testing.stories.tsx":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TooltipReturnFocus=exports.ReturnFocusTest=exports.PopupWithNonHidablePopup=exports.PopupWithBodyScroll=exports.MixedPopupTypes=exports.ComboboxWithinPopup=exports.CloseOnTargetHiddenTest=void 0;var _react=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(__webpack_require__("./node_modules/react/index.js")),_button=__webpack_require__("./modules/react/button/index.ts"),_layout=__webpack_require__("./modules/react/layout/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_CloseOnTargetHiddenTest=__webpack_require__("./modules/react/popup/stories/examples/CloseOnTargetHiddenTest.tsx"),_ReturnFocusTest=__webpack_require__("./modules/react/popup/stories/examples/ReturnFocusTest.tsx"),_MixedPopupTypes=__webpack_require__("./modules/react/popup/stories/examples/MixedPopupTypes.tsx"),_PopupWithNonHidablePopup=__webpack_require__("./modules/react/popup/stories/examples/PopupWithNonHidablePopup.tsx"),_TooltipReturnFocus=__webpack_require__("./modules/react/popup/stories/examples/TooltipReturnFocus.tsx"),_ComboboxWithinPopup=__webpack_require__("./modules/react/popup/stories/examples/ComboboxWithinPopup.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");exports.default={parameters:{storySource:{source:'\n    \n    // @ts-nocheck\n    // @ts-expect-error (Converted from ts-ignore)\n    var __STORY__ = "import React from \'react\';\\nimport {FormField} from \'@workday/canvas-kit-react/form-field\';\\nimport {DeleteButton, SecondaryButton} from \'@workday/canvas-kit-react/button\';\\nimport {Combobox} from \'@workday/canvas-kit-react/combobox\';\\nimport {Flex} from \'@workday/canvas-kit-react/layout\';\\nimport {\\n  Popup,\\n  useCloseOnOutsideClick,\\n  useCloseOnEscape,\\n  usePopupModel,\\n  useInitialFocus,\\n  useReturnFocus,\\n  useFocusTrap,\\n} from \'@workday/canvas-kit-react/popup\';\\n\\nimport {CloseOnTargetHiddenTest as CloseOnTargetHiddenTestExample} from \'./examples/CloseOnTargetHiddenTest\';\\nimport {ReturnFocusTest as ReturnFocusTestExample} from \'./examples/ReturnFocusTest\';\\nimport {MixedPopupTypes as MixedPopupTypesExample} from \'./examples/MixedPopupTypes\';\\nimport {PopupWithNonHidablePopup as PopupWithNonHidablePopupExample} from \'./examples/PopupWithNonHidablePopup\';\\nimport {TooltipReturnFocus as TooltipReturnFocusExample} from \'./examples/TooltipReturnFocus\';\\nimport {ComboboxWithinPopup as ComboboxWithinPopupExample} from \'./examples/ComboboxWithinPopup\';\\n\\nexport default {\\n  title: \'Testing/Popups/Popup\',\\n  component: Popup,\\n};\\n\\nexport const MixedPopupTypes = {\\n  render: MixedPopupTypesExample,\\n};\\n\\nexport const PopupWithNonHidablePopup = {\\n  render: PopupWithNonHidablePopupExample,\\n};\\n\\nexport const PopupWithBodyScroll = {\\n  render: () => {\\n    const model = usePopupModel();\\n\\n    useCloseOnOutsideClick(model);\\n    useCloseOnEscape(model);\\n    useInitialFocus(model);\\n    useReturnFocus(model);\\n    useFocusTrap(model);\\n\\n    const popupId = \'popup-test-id\';\\n    const visible = model.state.visibility !== \'hidden\';\\n    React.useLayoutEffect(() => {\\n      if (visible && model.state.stackRef.current) {\\n        model.state.stackRef.current.setAttribute(\'id\', popupId);\\n      }\\n    }, [model.state.stackRef, visible]);\\n\\n    return (\\n      <Popup model={model}>\\n        <div>\\n          <p>Scroll down and click on \\"Delete Item\\". The browser should not scroll.</p>\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n        </div>\\n        <Flex gap=\\"s\\">\\n          <Popup.Target as={DeleteButton}>Delete Item</Popup.Target>\\n          <div aria-owns={popupId} style={{position: \'absolute\'}} />\\n          <Popup.Popper>\\n            <Popup.Card width={400} padding=\\"s\\">\\n              <Popup.CloseIcon aria-label=\\"Close\\" />\\n              <Popup.Heading>Delete Item</Popup.Heading>\\n              <Popup.Body>\\n                <p>Are you sure you\'d like to delete the item titled \'My Item\'?</p>\\n              </Popup.Body>\\n              <Flex gap=\\"s\\">\\n                <Popup.CloseButton as={DeleteButton}>Delete</Popup.CloseButton>\\n                <Popup.CloseButton>Cancel</Popup.CloseButton>\\n              </Flex>\\n            </Popup.Card>\\n          </Popup.Popper>\\n          <SecondaryButton>Next Focusable Button</SecondaryButton>\\n          <SecondaryButton>Focusable Button After Popup</SecondaryButton>\\n        </Flex>\\n      </Popup>\\n    );\\n  },\\n};\\n\\nexport const TooltipReturnFocus = {\\n  render: TooltipReturnFocusExample,\\n};\\n\\nexport const ComboboxWithinPopup = {\\n  render: ComboboxWithinPopupExample,\\n};\\n\\nexport const ReturnFocusTest = {\\n  render: ReturnFocusTestExample,\\n};\\n\\nexport const CloseOnTargetHiddenTest = {\\n  render: CloseOnTargetHiddenTestExample,\\n};\\n";\n    // @ts-expect-error (Converted from ts-ignore)\n    var __LOCATIONS_MAP__ = {\n  "MixedPopupTypes": {\n    "startLoc": {\n      "col": 31,\n      "line": 28\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 30\n    },\n    "startBody": {\n      "col": 31,\n      "line": 28\n    },\n    "endBody": {\n      "col": 1,\n      "line": 30\n    }\n  },\n  "PopupWithNonHidablePopup": {\n    "startLoc": {\n      "col": 40,\n      "line": 32\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 34\n    },\n    "startBody": {\n      "col": 40,\n      "line": 32\n    },\n    "endBody": {\n      "col": 1,\n      "line": 34\n    }\n  },\n  "PopupWithBodyScroll": {\n    "startLoc": {\n      "col": 35,\n      "line": 36\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 157\n    },\n    "startBody": {\n      "col": 35,\n      "line": 36\n    },\n    "endBody": {\n      "col": 1,\n      "line": 157\n    }\n  },\n  "TooltipReturnFocus": {\n    "startLoc": {\n      "col": 34,\n      "line": 159\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 161\n    },\n    "startBody": {\n      "col": 34,\n      "line": 159\n    },\n    "endBody": {\n      "col": 1,\n      "line": 161\n    }\n  },\n  "ComboboxWithinPopup": {\n    "startLoc": {\n      "col": 35,\n      "line": 163\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 165\n    },\n    "startBody": {\n      "col": 35,\n      "line": 163\n    },\n    "endBody": {\n      "col": 1,\n      "line": 165\n    }\n  },\n  "ReturnFocusTest": {\n    "startLoc": {\n      "col": 31,\n      "line": 167\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 169\n    },\n    "startBody": {\n      "col": 31,\n      "line": 167\n    },\n    "endBody": {\n      "col": 1,\n      "line": 169\n    }\n  },\n  "CloseOnTargetHiddenTest": {\n    "startLoc": {\n      "col": 39,\n      "line": 171\n    },\n    "endLoc": {\n      "col": 1,\n      "line": 173\n    },\n    "startBody": {\n      "col": 39,\n      "line": 171\n    },\n    "endBody": {\n      "col": 1,\n      "line": 173\n    }\n  }\n};\n    \nimport React from \'react\';\nimport {FormField} from \'@workday/canvas-kit-react/form-field\';\nimport {DeleteButton, SecondaryButton} from \'@workday/canvas-kit-react/button\';\nimport {Combobox} from \'@workday/canvas-kit-react/combobox\';\nimport {Flex} from \'@workday/canvas-kit-react/layout\';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  useInitialFocus,\n  useReturnFocus,\n  useFocusTrap,\n} from \'@workday/canvas-kit-react/popup\';\n\nimport {CloseOnTargetHiddenTest as CloseOnTargetHiddenTestExample} from \'./examples/CloseOnTargetHiddenTest\';\nimport {ReturnFocusTest as ReturnFocusTestExample} from \'./examples/ReturnFocusTest\';\nimport {MixedPopupTypes as MixedPopupTypesExample} from \'./examples/MixedPopupTypes\';\nimport {PopupWithNonHidablePopup as PopupWithNonHidablePopupExample} from \'./examples/PopupWithNonHidablePopup\';\nimport {TooltipReturnFocus as TooltipReturnFocusExample} from \'./examples/TooltipReturnFocus\';\nimport {ComboboxWithinPopup as ComboboxWithinPopupExample} from \'./examples/ComboboxWithinPopup\';\n\nexport default {parameters: {\n  "storySource": {\n    "source": "import React from \'react\';\\nimport {FormField} from \'@workday/canvas-kit-react/form-field\';\\nimport {DeleteButton, SecondaryButton} from \'@workday/canvas-kit-react/button\';\\nimport {Combobox} from \'@workday/canvas-kit-react/combobox\';\\nimport {Flex} from \'@workday/canvas-kit-react/layout\';\\nimport {\\n  Popup,\\n  useCloseOnOutsideClick,\\n  useCloseOnEscape,\\n  usePopupModel,\\n  useInitialFocus,\\n  useReturnFocus,\\n  useFocusTrap,\\n} from \'@workday/canvas-kit-react/popup\';\\n\\nimport {CloseOnTargetHiddenTest as CloseOnTargetHiddenTestExample} from \'./examples/CloseOnTargetHiddenTest\';\\nimport {ReturnFocusTest as ReturnFocusTestExample} from \'./examples/ReturnFocusTest\';\\nimport {MixedPopupTypes as MixedPopupTypesExample} from \'./examples/MixedPopupTypes\';\\nimport {PopupWithNonHidablePopup as PopupWithNonHidablePopupExample} from \'./examples/PopupWithNonHidablePopup\';\\nimport {TooltipReturnFocus as TooltipReturnFocusExample} from \'./examples/TooltipReturnFocus\';\\nimport {ComboboxWithinPopup as ComboboxWithinPopupExample} from \'./examples/ComboboxWithinPopup\';\\n\\nexport default {\\n  title: \'Testing/Popups/Popup\',\\n  component: Popup,\\n};\\n\\nexport const MixedPopupTypes = {\\n  render: MixedPopupTypesExample,\\n};\\n\\nexport const PopupWithNonHidablePopup = {\\n  render: PopupWithNonHidablePopupExample,\\n};\\n\\nexport const PopupWithBodyScroll = {\\n  render: () => {\\n    const model = usePopupModel();\\n\\n    useCloseOnOutsideClick(model);\\n    useCloseOnEscape(model);\\n    useInitialFocus(model);\\n    useReturnFocus(model);\\n    useFocusTrap(model);\\n\\n    const popupId = \'popup-test-id\';\\n    const visible = model.state.visibility !== \'hidden\';\\n    React.useLayoutEffect(() => {\\n      if (visible && model.state.stackRef.current) {\\n        model.state.stackRef.current.setAttribute(\'id\', popupId);\\n      }\\n    }, [model.state.stackRef, visible]);\\n\\n    return (\\n      <Popup model={model}>\\n        <div>\\n          <p>Scroll down and click on \\"Delete Item\\". The browser should not scroll.</p>\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n          <br />\\n        </div>\\n        <Flex gap=\\"s\\">\\n          <Popup.Target as={DeleteButton}>Delete Item</Popup.Target>\\n          <div aria-owns={popupId} style={{position: \'absolute\'}} />\\n          <Popup.Popper>\\n            <Popup.Card width={400} padding=\\"s\\">\\n              <Popup.CloseIcon aria-label=\\"Close\\" />\\n              <Popup.Heading>Delete Item</Popup.Heading>\\n              <Popup.Body>\\n                <p>Are you sure you\'d like to delete the item titled \'My Item\'?</p>\\n              </Popup.Body>\\n              <Flex gap=\\"s\\">\\n                <Popup.CloseButton as={DeleteButton}>Delete</Popup.CloseButton>\\n                <Popup.CloseButton>Cancel</Popup.CloseButton>\\n              </Flex>\\n            </Popup.Card>\\n          </Popup.Popper>\\n          <SecondaryButton>Next Focusable Button</SecondaryButton>\\n          <SecondaryButton>Focusable Button After Popup</SecondaryButton>\\n        </Flex>\\n      </Popup>\\n    );\\n  },\\n};\\n\\nexport const TooltipReturnFocus = {\\n  render: TooltipReturnFocusExample,\\n};\\n\\nexport const ComboboxWithinPopup = {\\n  render: ComboboxWithinPopupExample,\\n};\\n\\nexport const ReturnFocusTest = {\\n  render: ReturnFocusTestExample,\\n};\\n\\nexport const CloseOnTargetHiddenTest = {\\n  render: CloseOnTargetHiddenTestExample,\\n};\\n",\n    "locationsMap": {\n      "mixed-popup-types": {\n        "startLoc": {\n          "col": 31,\n          "line": 28\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 30\n        },\n        "startBody": {\n          "col": 31,\n          "line": 28\n        },\n        "endBody": {\n          "col": 1,\n          "line": 30\n        }\n      },\n      "popup-with-non-hidable-popup": {\n        "startLoc": {\n          "col": 40,\n          "line": 32\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 34\n        },\n        "startBody": {\n          "col": 40,\n          "line": 32\n        },\n        "endBody": {\n          "col": 1,\n          "line": 34\n        }\n      },\n      "popup-with-body-scroll": {\n        "startLoc": {\n          "col": 35,\n          "line": 36\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 157\n        },\n        "startBody": {\n          "col": 35,\n          "line": 36\n        },\n        "endBody": {\n          "col": 1,\n          "line": 157\n        }\n      },\n      "tooltip-return-focus": {\n        "startLoc": {\n          "col": 34,\n          "line": 159\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 161\n        },\n        "startBody": {\n          "col": 34,\n          "line": 159\n        },\n        "endBody": {\n          "col": 1,\n          "line": 161\n        }\n      },\n      "combobox-within-popup": {\n        "startLoc": {\n          "col": 35,\n          "line": 163\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 165\n        },\n        "startBody": {\n          "col": 35,\n          "line": 163\n        },\n        "endBody": {\n          "col": 1,\n          "line": 165\n        }\n      },\n      "return-focus-test": {\n        "startLoc": {\n          "col": 31,\n          "line": 167\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 169\n        },\n        "startBody": {\n          "col": 31,\n          "line": 167\n        },\n        "endBody": {\n          "col": 1,\n          "line": 169\n        }\n      },\n      "close-on-target-hidden-test": {\n        "startLoc": {\n          "col": 39,\n          "line": 171\n        },\n        "endLoc": {\n          "col": 1,\n          "line": 173\n        },\n        "startBody": {\n          "col": 39,\n          "line": 171\n        },\n        "endBody": {\n          "col": 1,\n          "line": 173\n        }\n      }\n    }\n  }\n,},\n  title: \'Testing/Popups/Popup\',\n  component: Popup,\n};\n\nexport const MixedPopupTypes = {\n  render: MixedPopupTypesExample,\n};;\n\nexport const PopupWithNonHidablePopup = {\n  render: PopupWithNonHidablePopupExample,\n};;\n\nexport const PopupWithBodyScroll = {\n  render: () => {\n    const model = usePopupModel();\n\n    useCloseOnOutsideClick(model);\n    useCloseOnEscape(model);\n    useInitialFocus(model);\n    useReturnFocus(model);\n    useFocusTrap(model);\n\n    const popupId = \'popup-test-id\';\n    const visible = model.state.visibility !== \'hidden\';\n    React.useLayoutEffect(() => {\n      if (visible && model.state.stackRef.current) {\n        model.state.stackRef.current.setAttribute(\'id\', popupId);\n      }\n    }, [model.state.stackRef, visible]);\n\n    return (\n      <Popup model={model}>\n        <div>\n          <p>Scroll down and click on "Delete Item". The browser should not scroll.</p>\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n        </div>\n        <Flex gap="s">\n          <Popup.Target as={DeleteButton}>Delete Item</Popup.Target>\n          <div aria-owns={popupId} style={{position: \'absolute\'}} />\n          <Popup.Popper>\n            <Popup.Card width={400} padding="s">\n              <Popup.CloseIcon aria-label="Close" />\n              <Popup.Heading>Delete Item</Popup.Heading>\n              <Popup.Body>\n                <p>Are you sure you\'d like to delete the item titled \'My Item\'?</p>\n              </Popup.Body>\n              <Flex gap="s">\n                <Popup.CloseButton as={DeleteButton}>Delete</Popup.CloseButton>\n                <Popup.CloseButton>Cancel</Popup.CloseButton>\n              </Flex>\n            </Popup.Card>\n          </Popup.Popper>\n          <SecondaryButton>Next Focusable Button</SecondaryButton>\n          <SecondaryButton>Focusable Button After Popup</SecondaryButton>\n        </Flex>\n      </Popup>\n    );\n  },\n};;\n\nexport const TooltipReturnFocus = {\n  render: TooltipReturnFocusExample,\n};;\n\nexport const ComboboxWithinPopup = {\n  render: ComboboxWithinPopupExample,\n};;\n\nexport const ReturnFocusTest = {\n  render: ReturnFocusTestExample,\n};;\n\nexport const CloseOnTargetHiddenTest = {\n  render: CloseOnTargetHiddenTestExample,\n};\n',locationsMap:{"mixed-popup-types":{startLoc:{col:31,line:295},endLoc:{col:1,line:297},startBody:{col:31,line:295},endBody:{col:1,line:297}},"popup-with-non-hidable-popup":{startLoc:{col:40,line:299},endLoc:{col:1,line:301},startBody:{col:40,line:299},endBody:{col:1,line:301}},"popup-with-body-scroll":{startLoc:{col:35,line:303},endLoc:{col:1,line:424},startBody:{col:35,line:303},endBody:{col:1,line:424}},"tooltip-return-focus":{startLoc:{col:34,line:426},endLoc:{col:1,line:428},startBody:{col:34,line:426},endBody:{col:1,line:428}},"combobox-within-popup":{startLoc:{col:35,line:430},endLoc:{col:1,line:432},startBody:{col:35,line:430},endBody:{col:1,line:432}},"return-focus-test":{startLoc:{col:31,line:434},endLoc:{col:1,line:436},startBody:{col:31,line:434},endBody:{col:1,line:436}},"close-on-target-hidden-test":{startLoc:{col:39,line:438},endLoc:{col:1,line:440},startBody:{col:39,line:438},endBody:{col:1,line:440}}}},storySource:{source:"import React from 'react';\nimport {FormField} from '@workday/canvas-kit-react/form-field';\nimport {DeleteButton, SecondaryButton} from '@workday/canvas-kit-react/button';\nimport {Combobox} from '@workday/canvas-kit-react/combobox';\nimport {Flex} from '@workday/canvas-kit-react/layout';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  useInitialFocus,\n  useReturnFocus,\n  useFocusTrap,\n} from '@workday/canvas-kit-react/popup';\n\nimport {CloseOnTargetHiddenTest as CloseOnTargetHiddenTestExample} from './examples/CloseOnTargetHiddenTest';\nimport {ReturnFocusTest as ReturnFocusTestExample} from './examples/ReturnFocusTest';\nimport {MixedPopupTypes as MixedPopupTypesExample} from './examples/MixedPopupTypes';\nimport {PopupWithNonHidablePopup as PopupWithNonHidablePopupExample} from './examples/PopupWithNonHidablePopup';\nimport {TooltipReturnFocus as TooltipReturnFocusExample} from './examples/TooltipReturnFocus';\nimport {ComboboxWithinPopup as ComboboxWithinPopupExample} from './examples/ComboboxWithinPopup';\n\nexport default {\n  title: 'Testing/Popups/Popup',\n  component: Popup,\n};\n\nexport const MixedPopupTypes = {\n  render: MixedPopupTypesExample,\n};\n\nexport const PopupWithNonHidablePopup = {\n  render: PopupWithNonHidablePopupExample,\n};\n\nexport const PopupWithBodyScroll = {\n  render: () => {\n    const model = usePopupModel();\n\n    useCloseOnOutsideClick(model);\n    useCloseOnEscape(model);\n    useInitialFocus(model);\n    useReturnFocus(model);\n    useFocusTrap(model);\n\n    const popupId = 'popup-test-id';\n    const visible = model.state.visibility !== 'hidden';\n    React.useLayoutEffect(() => {\n      if (visible && model.state.stackRef.current) {\n        model.state.stackRef.current.setAttribute('id', popupId);\n      }\n    }, [model.state.stackRef, visible]);\n\n    return (\n      <Popup model={model}>\n        <div>\n          <p>Scroll down and click on \"Delete Item\". The browser should not scroll.</p>\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n          <br />\n        </div>\n        <Flex gap=\"s\">\n          <Popup.Target as={DeleteButton}>Delete Item</Popup.Target>\n          <div aria-owns={popupId} style={{position: 'absolute'}} />\n          <Popup.Popper>\n            <Popup.Card width={400} padding=\"s\">\n              <Popup.CloseIcon aria-label=\"Close\" />\n              <Popup.Heading>Delete Item</Popup.Heading>\n              <Popup.Body>\n                <p>Are you sure you'd like to delete the item titled 'My Item'?</p>\n              </Popup.Body>\n              <Flex gap=\"s\">\n                <Popup.CloseButton as={DeleteButton}>Delete</Popup.CloseButton>\n                <Popup.CloseButton>Cancel</Popup.CloseButton>\n              </Flex>\n            </Popup.Card>\n          </Popup.Popper>\n          <SecondaryButton>Next Focusable Button</SecondaryButton>\n          <SecondaryButton>Focusable Button After Popup</SecondaryButton>\n        </Flex>\n      </Popup>\n    );\n  },\n};\n\nexport const TooltipReturnFocus = {\n  render: TooltipReturnFocusExample,\n};\n\nexport const ComboboxWithinPopup = {\n  render: ComboboxWithinPopupExample,\n};\n\nexport const ReturnFocusTest = {\n  render: ReturnFocusTestExample,\n};\n\nexport const CloseOnTargetHiddenTest = {\n  render: CloseOnTargetHiddenTestExample,\n};\n",locationsMap:{"mixed-popup-types":{startLoc:{col:31,line:28},endLoc:{col:1,line:30},startBody:{col:31,line:28},endBody:{col:1,line:30}},"popup-with-non-hidable-popup":{startLoc:{col:40,line:32},endLoc:{col:1,line:34},startBody:{col:40,line:32},endBody:{col:1,line:34}},"popup-with-body-scroll":{startLoc:{col:35,line:36},endLoc:{col:1,line:157},startBody:{col:35,line:36},endBody:{col:1,line:157}},"tooltip-return-focus":{startLoc:{col:34,line:159},endLoc:{col:1,line:161},startBody:{col:34,line:159},endBody:{col:1,line:161}},"combobox-within-popup":{startLoc:{col:35,line:163},endLoc:{col:1,line:165},startBody:{col:35,line:163},endBody:{col:1,line:165}},"return-focus-test":{startLoc:{col:31,line:167},endLoc:{col:1,line:169},startBody:{col:31,line:167},endBody:{col:1,line:169}},"close-on-target-hidden-test":{startLoc:{col:39,line:171},endLoc:{col:1,line:173},startBody:{col:39,line:171},endBody:{col:1,line:173}}}}},title:"Testing/Popups/Popup",component:_popup.Popup};exports.MixedPopupTypes={render:_MixedPopupTypes.MixedPopupTypes},exports.PopupWithNonHidablePopup={render:_PopupWithNonHidablePopup.PopupWithNonHidablePopup},exports.PopupWithBodyScroll={render:()=>{const model=(0,_popup.usePopupModel)();(0,_popup.useCloseOnOutsideClick)(model),(0,_popup.useCloseOnEscape)(model),(0,_popup.useInitialFocus)(model),(0,_popup.useReturnFocus)(model),(0,_popup.useFocusTrap)(model);const visible="hidden"!==model.state.visibility;return _react.default.useLayoutEffect((()=>{visible&&model.state.stackRef.current&&model.state.stackRef.current.setAttribute("id","popup-test-id")}),[model.state.stackRef,visible]),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsxs)("div",{children:[(0,_jsxRuntime.jsx)("p",{children:'Scroll down and click on "Delete Item". The browser should not scroll.'}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{}),(0,_jsxRuntime.jsx)("br",{})]}),(0,_jsxRuntime.jsxs)(_layout.Flex,{gap:"s",children:[(0,_jsxRuntime.jsx)(_popup.Popup.Target,{as:_button.DeleteButton,children:"Delete Item"}),(0,_jsxRuntime.jsx)("div",{"aria-owns":"popup-test-id",style:{position:"absolute"}}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{width:400,padding:"s",children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close"}),(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:"Delete Item"}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:(0,_jsxRuntime.jsx)("p",{children:"Are you sure you'd like to delete the item titled 'My Item'?"})}),(0,_jsxRuntime.jsxs)(_layout.Flex,{gap:"s",children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseButton,{as:_button.DeleteButton,children:"Delete"}),(0,_jsxRuntime.jsx)(_popup.Popup.CloseButton,{children:"Cancel"})]})]})}),(0,_jsxRuntime.jsx)(_button.SecondaryButton,{children:"Next Focusable Button"}),(0,_jsxRuntime.jsx)(_button.SecondaryButton,{children:"Focusable Button After Popup"})]})]})}},exports.TooltipReturnFocus={render:_TooltipReturnFocus.TooltipReturnFocus},exports.ComboboxWithinPopup={render:_ComboboxWithinPopup.ComboboxWithinPopup},exports.ReturnFocusTest={render:_ReturnFocusTest.ReturnFocusTest},exports.CloseOnTargetHiddenTest={render:_CloseOnTargetHiddenTest.CloseOnTargetHiddenTest};module.exports.__namedExportsOrder=["TooltipReturnFocus","ReturnFocusTest","PopupWithNonHidablePopup","PopupWithBodyScroll","MixedPopupTypes","ComboboxWithinPopup","CloseOnTargetHiddenTest"]},"./modules/react/popup/stories/examples/CloseOnTargetHiddenTest.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CloseOnTargetHiddenTest=void 0;var _popup=__webpack_require__("./modules/react/popup/index.ts"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CloseOnTargetHiddenTest=()=>{const model=(0,_popup.usePopupModel)();return(0,_popup.useCloseOnEscape)(model),(0,_popup.useCloseOnTargetHidden)(model),(0,_jsxRuntime.jsx)("div",{style:{width:400,height:400,overflow:"scroll",padding:4,position:"relative"},"data-testid":"scroll-area",children:(0,_jsxRuntime.jsxs)("div",{style:{width:950,height:950},children:[(0,_jsxRuntime.jsx)("p",{style:{marginBottom:400},children:"Scroll down"}),(0,_jsxRuntime.jsx)("p",{children:"Scroll right and click on the button"}),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsx)("div",{style:{position:"absolute",width:950,height:950,display:"flex",top:0,left:0,justifyContent:"center"},children:(0,_jsxRuntime.jsx)(_popup.Popup.Target,{"data-testid":"target",style:{alignSelf:"center"},children:"Open Popup"})}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close"}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:(0,_jsxRuntime.jsx)("p",{children:"Scroll in any direction. The popup should close when at least 50% of the target button is hidden from view"})})]})})]})]})})};exports.CloseOnTargetHiddenTest=CloseOnTargetHiddenTest,CloseOnTargetHiddenTest.displayName="CloseOnTargetHiddenTest",CloseOnTargetHiddenTest.__RAW__="import {\n  Popup,\n  useCloseOnEscape,\n  useCloseOnTargetHidden,\n  usePopupModel,\n} from '@workday/canvas-kit-react/popup';\n\nexport const CloseOnTargetHiddenTest = () => {\n  const model = usePopupModel();\n\n  useCloseOnEscape(model);\n  useCloseOnTargetHidden(model);\n\n  return (\n    <div\n      style={{width: 400, height: 400, overflow: 'scroll', padding: 4, position: 'relative'}}\n      data-testid=\"scroll-area\"\n    >\n      <div style={{width: 950, height: 950}}>\n        <p style={{marginBottom: 400}}>Scroll down</p>\n        <p>Scroll right and click on the button</p>\n        <Popup model={model}>\n          <div\n            style={{\n              position: 'absolute',\n              width: 950,\n              height: 950,\n              display: 'flex',\n              top: 0,\n              left: 0,\n              justifyContent: 'center',\n            }}\n          >\n            <Popup.Target data-testid=\"target\" style={{alignSelf: 'center'}}>\n              Open Popup\n            </Popup.Target>\n          </div>\n          <Popup.Popper>\n            <Popup.Card>\n              <Popup.CloseIcon aria-label=\"Close\" />\n              <Popup.Body>\n                <p>\n                  Scroll in any direction. The popup should close when at least 50% of the target\n                  button is hidden from view\n                </p>\n              </Popup.Body>\n            </Popup.Card>\n          </Popup.Popper>\n        </Popup>\n      </div>\n    </div>\n  );\n};\n"},"./modules/react/popup/stories/examples/ComboboxWithinPopup.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComboboxWithinPopup=void 0;var _formField=__webpack_require__("./modules/react/form-field/index.ts"),_button=__webpack_require__("./modules/react/button/index.ts"),_combobox=__webpack_require__("./modules/react/combobox/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ComboboxWithinPopup=()=>{const model=(0,_popup.usePopupModel)();return(0,_popup.useCloseOnOutsideClick)(model),(0,_popup.useCloseOnEscape)(model),(0,_popup.useInitialFocus)(model),(0,_popup.useReturnFocus)(model),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsx)(_popup.Popup.Target,{as:_button.SecondaryButton,children:"Open Popup"}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close"}),(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:"Popup With Combobox"}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:(0,_jsxRuntime.jsxs)(_formField.FormField,{orientation:"vertical",children:[(0,_jsxRuntime.jsx)(_formField.FormField.Label,{children:"Choose Your Food"}),(0,_jsxRuntime.jsxs)(_combobox.Combobox,{items:["Pizza","Cheeseburger","Fries","Hot Dog"],children:[(0,_jsxRuntime.jsx)(_formField.FormField.Input,{as:_combobox.Combobox.Input}),(0,_jsxRuntime.jsx)(_combobox.Combobox.Menu.Popper,{children:(0,_jsxRuntime.jsx)(_combobox.Combobox.Menu.Card,{children:(0,_jsxRuntime.jsx)(_combobox.Combobox.Menu.List,{children:item=>(0,_jsxRuntime.jsx)(_combobox.Combobox.Menu.Item,{children:item})})})})]})]})})]})})]})};exports.ComboboxWithinPopup=ComboboxWithinPopup,ComboboxWithinPopup.displayName="ComboboxWithinPopup",ComboboxWithinPopup.__RAW__="import {FormField} from '@workday/canvas-kit-react/form-field';\nimport {SecondaryButton} from '@workday/canvas-kit-react/button';\nimport {Combobox} from '@workday/canvas-kit-react/combobox';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  useInitialFocus,\n  useReturnFocus,\n} from '@workday/canvas-kit-react/popup';\n\nexport const ComboboxWithinPopup = () => {\n  const model = usePopupModel();\n\n  useCloseOnOutsideClick(model);\n  useCloseOnEscape(model);\n  useInitialFocus(model);\n  useReturnFocus(model);\n\n  return (\n    <Popup model={model}>\n      <Popup.Target as={SecondaryButton}>Open Popup</Popup.Target>\n      <Popup.Popper>\n        <Popup.Card>\n          <Popup.CloseIcon aria-label=\"Close\" />\n          <Popup.Heading>Popup With Combobox</Popup.Heading>\n          <Popup.Body>\n            <FormField orientation=\"vertical\">\n              <FormField.Label>Choose Your Food</FormField.Label>\n              <Combobox items={['Pizza', 'Cheeseburger', 'Fries', 'Hot Dog']}>\n                <FormField.Input as={Combobox.Input} />\n                <Combobox.Menu.Popper>\n                  <Combobox.Menu.Card>\n                    <Combobox.Menu.List>\n                      {item => <Combobox.Menu.Item>{item}</Combobox.Menu.Item>}\n                    </Combobox.Menu.List>\n                  </Combobox.Menu.Card>\n                </Combobox.Menu.Popper>\n              </Combobox>\n            </FormField>\n          </Popup.Body>\n        </Popup.Card>\n      </Popup.Popper>\n    </Popup>\n  );\n};\n"},"./modules/react/popup/stories/examples/MixedPopupTypes.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.MixedPopupTypes=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_reactDom=_interopRequireDefault(__webpack_require__("./node_modules/react-dom/index.js")),_tooltip=__webpack_require__("./modules/react/tooltip/index.ts"),_button=__webpack_require__("./modules/react/button/index.ts"),_common=__webpack_require__("./modules/react/common/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const Window=({children,heading,relativeNode,top,left})=>{const model=(0,_popup.usePopupModel)({initialVisibility:"visible"});return(0,_popup.usePopupStack)(model.state.stackRef),(0,_popup.useBringToTopOnClick)(model),(0,_common.useMount)((()=>{const element=model.state.stackRef.current,rect=relativeNode.current.getBoundingClientRect();element.style.position="absolute",element.style.top=`${top+rect.top}px`,element.style.left=`${left+rect.left}px`})),_reactDom.default.createPortal((0,_jsxRuntime.jsx)(_popup.Popup,{model,children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{width:500,children:[(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:heading}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children})]})}),model.state.stackRef.current)},TempPopup=({heading,deleteText,children})=>{const model=(0,_popup.usePopupModel)();return(0,_popup.useInitialFocus)(model),(0,_popup.useReturnFocus)(model),(0,_popup.useCloseOnOutsideClick)(model),(0,_popup.useCloseOnEscape)(model),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsx)(_popup.Popup.Target,{as:_button.DeleteButton,style:{marginRight:"16px"},children:deleteText}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{width:400,padding:"s",children:[(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:heading}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:children({onClose:model.events.hide})})]})})]})};TempPopup.displayName="TempPopup";const MixedPopupTypes=()=>{const ref=_react.default.useRef(null);return(0,_jsxRuntime.jsxs)("div",{ref,style:{height:420},children:[(0,_jsxRuntime.jsx)(Window,{heading:"Window 1",top:50,left:50,relativeNode:ref,children:(0,_jsxRuntime.jsx)(_tooltip.Tooltip,{title:"Really long tooltip showing how popup stacks overlap 1",children:(0,_jsxRuntime.jsx)("span",{tabIndex:0,children:"Contents of Window 1"})})}),(0,_jsxRuntime.jsx)(Window,{heading:"Window 2",top:100,left:250,relativeNode:ref,children:(0,_jsxRuntime.jsx)(_tooltip.Tooltip,{title:"Really long tooltip showing how popup stacks overlap 2",children:(0,_jsxRuntime.jsx)("span",{tabIndex:0,children:"Contents of Window 2"})})}),(0,_jsxRuntime.jsx)(Window,{heading:"Window 4",top:300,left:250,relativeNode:ref,children:(0,_jsxRuntime.jsx)("div",{children:(0,_jsxRuntime.jsx)(_tooltip.Tooltip,{title:"Really long tooltip showing how popup stacks overlap 3",children:(0,_jsxRuntime.jsx)("span",{tabIndex:0,children:"Contents of Window 4"})})})}),(0,_jsxRuntime.jsx)(Window,{heading:"Window 3",top:200,left:75,relativeNode:ref,children:(0,_jsxRuntime.jsxs)("div",{children:[(0,_jsxRuntime.jsx)(_tooltip.Tooltip,{title:"Really long tooltip showing how popup stacks overlap 4",children:(0,_jsxRuntime.jsx)("span",{tabIndex:0,onClick:()=>console.log("clicked"),children:"Contents of Window 3"})}),(0,_jsxRuntime.jsx)("div",{children:(0,_jsxRuntime.jsx)(TempPopup,{heading:"Delete Item",deleteText:"Delete Item",children:({onClose})=>(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{style:{marginBottom:"24px"},children:"Are you sure you'd like to delete the item titled 'My Item'?"}),(0,_jsxRuntime.jsx)(TempPopup,{heading:"Really Delete Item",deleteText:"Delete",children:({onClose})=>(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{style:{marginBottom:"24px"},children:"Are you REALLY sure you'd like to delete the item titled 'My Item'?"}),(0,_jsxRuntime.jsx)(_button.DeleteButton,{style:{marginRight:"16px"},onClick:onClose,children:"Really Delete"}),(0,_jsxRuntime.jsx)(_button.SecondaryButton,{onClick:onClose,children:"Cancel"})]})}),(0,_jsxRuntime.jsx)(_button.SecondaryButton,{onClick:onClose,children:"Cancel"})]})})})]})})]})};exports.MixedPopupTypes=MixedPopupTypes,MixedPopupTypes.displayName="MixedPopupTypes",MixedPopupTypes.__RAW__="import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Tooltip} from '@workday/canvas-kit-react/tooltip';\nimport {DeleteButton, SecondaryButton} from '@workday/canvas-kit-react/button';\nimport {useMount} from '@workday/canvas-kit-react/common';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  usePopupStack,\n  useBringToTopOnClick,\n  useInitialFocus,\n  useReturnFocus,\n} from '@workday/canvas-kit-react/popup';\n\ninterface WindowProps {\n  top: number;\n  left: number;\n  heading: string;\n  children: React.ReactNode;\n  relativeNode: React.RefObject<HTMLDivElement>;\n}\n\nconst Window = ({children, heading, relativeNode, top, left}: WindowProps) => {\n  const model = usePopupModel({\n    initialVisibility: 'visible',\n  });\n\n  usePopupStack(model.state.stackRef);\n  useBringToTopOnClick(model);\n\n  // position Window relative to a container\n  useMount(() => {\n    const element = model.state.stackRef.current;\n    const rect = relativeNode.current.getBoundingClientRect();\n    element.style.position = 'absolute';\n    element.style.top = `${top + rect.top}px`;\n    element.style.left = `${left + rect.left}px`;\n  });\n\n  return ReactDOM.createPortal(\n    <Popup model={model}>\n      <Popup.Card width={500}>\n        <Popup.Heading>{heading}</Popup.Heading>\n        <Popup.Body>{children}</Popup.Body>\n      </Popup.Card>\n    </Popup>,\n    model.state.stackRef.current\n  );\n};\n\nconst TempPopup = ({\n  heading,\n  deleteText,\n  children,\n}: {\n  heading: string;\n  deleteText: string;\n  children: ({onClose}: {onClose: () => void}) => React.ReactNode;\n}) => {\n  const model = usePopupModel();\n\n  useInitialFocus(model);\n  useReturnFocus(model);\n  useCloseOnOutsideClick(model);\n  useCloseOnEscape(model);\n\n  return (\n    <Popup model={model}>\n      <Popup.Target as={DeleteButton} style={{marginRight: '16px'}}>\n        {deleteText}\n      </Popup.Target>\n      <Popup.Popper>\n        <Popup.Card width={400} padding=\"s\">\n          <Popup.Heading>{heading}</Popup.Heading>\n          <Popup.Body>{children({onClose: model.events.hide})}</Popup.Body>\n        </Popup.Card>\n      </Popup.Popper>\n    </Popup>\n  );\n};\n\nexport const MixedPopupTypes = () => {\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  return (\n    <div ref={ref} style={{height: 420}}>\n      <Window heading=\"Window 1\" top={50} left={50} relativeNode={ref}>\n        <Tooltip title=\"Really long tooltip showing how popup stacks overlap 1\">\n          <span tabIndex={0}>Contents of Window 1</span>\n        </Tooltip>\n      </Window>\n      <Window heading=\"Window 2\" top={100} left={250} relativeNode={ref}>\n        <Tooltip title=\"Really long tooltip showing how popup stacks overlap 2\">\n          <span tabIndex={0}>Contents of Window 2</span>\n        </Tooltip>\n      </Window>\n      <Window heading=\"Window 4\" top={300} left={250} relativeNode={ref}>\n        <div>\n          <Tooltip title=\"Really long tooltip showing how popup stacks overlap 3\">\n            <span tabIndex={0}>Contents of Window 4</span>\n          </Tooltip>\n        </div>\n      </Window>\n      <Window heading=\"Window 3\" top={200} left={75} relativeNode={ref}>\n        <div>\n          <Tooltip title=\"Really long tooltip showing how popup stacks overlap 4\">\n            <span tabIndex={0} onClick={() => console.log('clicked')}>\n              Contents of Window 3\n            </span>\n          </Tooltip>\n          <div>\n            <TempPopup heading=\"Delete Item\" deleteText=\"Delete Item\">\n              {({onClose}) => (\n                <>\n                  <div style={{marginBottom: '24px'}}>\n                    Are you sure you'd like to delete the item titled 'My Item'?\n                  </div>\n                  <TempPopup heading=\"Really Delete Item\" deleteText=\"Delete\">\n                    {({onClose}) => (\n                      <>\n                        <div style={{marginBottom: '24px'}}>\n                          Are you REALLY sure you'd like to delete the item titled 'My Item'?\n                        </div>\n\n                        <DeleteButton style={{marginRight: '16px'}} onClick={onClose}>\n                          Really Delete\n                        </DeleteButton>\n                        <SecondaryButton onClick={onClose}>Cancel</SecondaryButton>\n                      </>\n                    )}\n                  </TempPopup>\n                  <SecondaryButton onClick={onClose}>Cancel</SecondaryButton>\n                </>\n              )}\n            </TempPopup>\n          </div>\n        </div>\n      </Window>\n    </div>\n  );\n};\n"},"./modules/react/popup/stories/examples/PopupWithNonHidablePopup.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PopupWithNonHidablePopup=void 0;var _layout=__webpack_require__("./modules/react/layout/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PopupWithNonHidablePopup=()=>{const popup1=(0,_popup.usePopupModel)(),popup2=(0,_popup.usePopupModel)();return(0,_popup.useCloseOnOutsideClick)(popup1),(0,_popup.useCloseOnEscape)(popup1),(0,_jsxRuntime.jsxs)(_layout.Flex,{gap:"s",children:[(0,_jsxRuntime.jsxs)(_popup.Popup,{model:popup1,children:[(0,_jsxRuntime.jsx)(_popup.Popup.Target,{children:"Open Popup 1"}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{"aria-label":"Popup 1",children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close",size:"small"}),(0,_jsxRuntime.jsxs)(_popup.Popup.Body,{children:[(0,_jsxRuntime.jsx)("p",{children:"Contents of Popup 1"}),(0,_jsxRuntime.jsx)(_popup.Popup.Target,{model:popup2,children:"Open Popup 2"})]})]})})]}),(0,_jsxRuntime.jsx)(_popup.Popup,{model:popup2,children:(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{"aria-label":"Popup 1",children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close",size:"small"}),(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:"Popup 2 (Not hidable on outside click)"}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:"Contents of Popup 2"})]})})})]})};exports.PopupWithNonHidablePopup=PopupWithNonHidablePopup,PopupWithNonHidablePopup.displayName="PopupWithNonHidablePopup",PopupWithNonHidablePopup.__RAW__='import {Flex} from \'@workday/canvas-kit-react/layout\';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n} from \'@workday/canvas-kit-react/popup\';\n\nexport const PopupWithNonHidablePopup = () => {\n  const popup1 = usePopupModel();\n  const popup2 = usePopupModel();\n\n  useCloseOnOutsideClick(popup1);\n  useCloseOnEscape(popup1);\n\n  return (\n    <Flex gap="s">\n      <Popup model={popup1}>\n        <Popup.Target>Open Popup 1</Popup.Target>\n        <Popup.Popper>\n          <Popup.Card aria-label="Popup 1">\n            <Popup.CloseIcon aria-label="Close" size="small" />\n            <Popup.Body>\n              <p>Contents of Popup 1</p>\n              <Popup.Target model={popup2}>Open Popup 2</Popup.Target>\n            </Popup.Body>\n          </Popup.Card>\n        </Popup.Popper>\n      </Popup>\n      <Popup model={popup2}>\n        <Popup.Popper>\n          <Popup.Card aria-label="Popup 1">\n            <Popup.CloseIcon aria-label="Close" size="small" />\n            <Popup.Heading>Popup 2 (Not hidable on outside click)</Popup.Heading>\n            <Popup.Body>Contents of Popup 2</Popup.Body>\n          </Popup.Card>\n        </Popup.Popper>\n      </Popup>\n    </Flex>\n  );\n};\n'},"./modules/react/popup/stories/examples/ReturnFocusTest.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReturnFocusTest=void 0;var _textInput=__webpack_require__("./modules/react/text-input/index.ts"),_formField=__webpack_require__("./modules/react/form-field/index.ts"),_button=__webpack_require__("./modules/react/button/index.ts"),_layout=__webpack_require__("./modules/react/layout/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ReturnFocusTest=()=>{const model=(0,_popup.usePopupModel)();return(0,_popup.useCloseOnOutsideClick)(model),(0,_popup.useCloseOnEscape)(model),(0,_popup.useInitialFocus)(model),(0,_popup.useReturnFocus)(model),(0,_jsxRuntime.jsx)("div",{style:{width:400,height:400,overflow:"scroll",padding:4},"data-testid":"scroll-area",children:(0,_jsxRuntime.jsxs)("div",{style:{width:950},children:[(0,_jsxRuntime.jsx)("p",{style:{marginBottom:400},children:"Scroll down"}),(0,_jsxRuntime.jsx)("p",{children:"Scroll right and click on the button"}),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsxs)(_formField.FormField,{id:"return-focus-text-input",cs:{marginLeft:400},children:[(0,_jsxRuntime.jsx)(_formField.FormField.Label,{children:"Name"}),(0,_jsxRuntime.jsx)(_formField.FormField.Input,{as:_textInput.TextInput})]}),(0,_jsxRuntime.jsxs)(_layout.Flex,{style:{marginBottom:400,marginLeft:410},children:[(0,_jsxRuntime.jsx)(_button.SecondaryButton,{id:"return-focus-button-tabindex",tabIndex:-1,children:"Button with TabIndex=-1"}),(0,_jsxRuntime.jsx)(_popup.Popup.Target,{"data-testid":"target",children:"Open Popup"})]}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close"}),(0,_jsxRuntime.jsxs)(_popup.Popup.Body,{children:[(0,_jsxRuntime.jsx)("p",{children:'The "Open Popup" button should not receive focus if:'}),(0,_jsxRuntime.jsxs)("ul",{children:[(0,_jsxRuntime.jsx)("li",{children:"You click on the input"}),(0,_jsxRuntime.jsx)("li",{children:'You scroll the container so that less than half of the "Open Popup" is showing'}),(0,_jsxRuntime.jsx)("li",{children:(0,_jsxRuntime.jsx)(_button.TertiaryButton,{"data-testid":"focus-text-input-link",onClick:()=>{model.events.hide(),document.getElementById("input-return-focus-text-input").focus()},children:"You click this link"})})]})]})]})})]})]})})};exports.ReturnFocusTest=ReturnFocusTest,ReturnFocusTest.displayName="ReturnFocusTest",ReturnFocusTest.__RAW__='import {TextInput} from \'@workday/canvas-kit-react/text-input\';\nimport {FormField} from \'@workday/canvas-kit-react/form-field\';\nimport {SecondaryButton, TertiaryButton} from \'@workday/canvas-kit-react/button\';\nimport {Flex} from \'@workday/canvas-kit-react/layout\';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  useInitialFocus,\n  useReturnFocus,\n} from \'@workday/canvas-kit-react/popup\';\n\nexport const ReturnFocusTest = () => {\n  const model = usePopupModel();\n\n  useCloseOnOutsideClick(model);\n  useCloseOnEscape(model);\n  useInitialFocus(model);\n  useReturnFocus(model);\n\n  return (\n    <div\n      style={{width: 400, height: 400, overflow: \'scroll\', padding: 4}}\n      data-testid="scroll-area"\n    >\n      <div style={{width: 950}}>\n        <p style={{marginBottom: 400}}>Scroll down</p>\n        <p>Scroll right and click on the button</p>\n        <Popup model={model}>\n          <FormField id="return-focus-text-input" cs={{marginLeft: 400}}>\n            <FormField.Label>Name</FormField.Label>\n            <FormField.Input as={TextInput} />\n          </FormField>\n          <Flex style={{marginBottom: 400, marginLeft: 410}}>\n            <SecondaryButton id="return-focus-button-tabindex" tabIndex={-1}>\n              Button with TabIndex=-1\n            </SecondaryButton>\n            <Popup.Target data-testid="target">Open Popup</Popup.Target>\n          </Flex>\n          <Popup.Popper>\n            <Popup.Card>\n              <Popup.CloseIcon aria-label="Close" />\n              <Popup.Body>\n                <p>The "Open Popup" button should not receive focus if:</p>\n                <ul>\n                  <li>You click on the input</li>\n                  <li>\n                    You scroll the container so that less than half of the "Open Popup" is showing\n                  </li>\n                  <li>\n                    <TertiaryButton\n                      data-testid="focus-text-input-link"\n                      onClick={() => {\n                        model.events.hide();\n                        document.getElementById(\'input-return-focus-text-input\').focus();\n                      }}\n                    >\n                      You click this link\n                    </TertiaryButton>\n                  </li>\n                </ul>\n              </Popup.Body>\n            </Popup.Card>\n          </Popup.Popper>\n        </Popup>\n      </div>\n    </div>\n  );\n};\n'},"./modules/react/popup/stories/examples/TooltipReturnFocus.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TooltipReturnFocus=void 0;var _tooltip=__webpack_require__("./modules/react/tooltip/index.ts"),_button=__webpack_require__("./modules/react/button/index.ts"),_popup=__webpack_require__("./modules/react/popup/index.ts"),_canvasSystemIconsWeb=__webpack_require__("./node_modules/@workday/canvas-system-icons-web/dist/es6/index.js"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TooltipReturnFocus=()=>{const model=(0,_popup.usePopupModel)();return(0,_popup.useCloseOnOutsideClick)(model),(0,_popup.useCloseOnEscape)(model),(0,_popup.useInitialFocus)(model),(0,_popup.useReturnFocus)(model),(0,_jsxRuntime.jsxs)(_popup.Popup,{model,children:[(0,_jsxRuntime.jsx)(_tooltip.Tooltip,{title:"Open Popup",children:(0,_jsxRuntime.jsx)(_popup.Popup.Target,{as:_button.TertiaryButton,icon:_canvasSystemIconsWeb.menuGroupIcon})}),(0,_jsxRuntime.jsx)(_popup.Popup.Popper,{children:(0,_jsxRuntime.jsxs)(_popup.Popup.Card,{children:[(0,_jsxRuntime.jsx)(_popup.Popup.CloseIcon,{"aria-label":"Close"}),(0,_jsxRuntime.jsx)(_popup.Popup.Heading,{children:"Popup"}),(0,_jsxRuntime.jsx)(_popup.Popup.Body,{children:"Contents"})]})})]})};exports.TooltipReturnFocus=TooltipReturnFocus,TooltipReturnFocus.displayName="TooltipReturnFocus",TooltipReturnFocus.__RAW__="import {Tooltip} from '@workday/canvas-kit-react/tooltip';\nimport {TertiaryButton} from '@workday/canvas-kit-react/button';\nimport {\n  Popup,\n  useCloseOnOutsideClick,\n  useCloseOnEscape,\n  usePopupModel,\n  useInitialFocus,\n  useReturnFocus,\n} from '@workday/canvas-kit-react/popup';\nimport {menuGroupIcon} from '@workday/canvas-system-icons-web';\n\nexport const TooltipReturnFocus = () => {\n  const model = usePopupModel();\n\n  useCloseOnOutsideClick(model);\n  useCloseOnEscape(model);\n  useInitialFocus(model);\n  useReturnFocus(model);\n\n  return (\n    <Popup model={model}>\n      <Tooltip title=\"Open Popup\">\n        <Popup.Target as={TertiaryButton} icon={menuGroupIcon} />\n      </Tooltip>\n      <Popup.Popper>\n        <Popup.Card>\n          <Popup.CloseIcon aria-label=\"Close\" />\n          <Popup.Heading>Popup</Popup.Heading>\n          <Popup.Body>Contents</Popup.Body>\n        </Popup.Card>\n      </Popup.Popper>\n    </Popup>\n  );\n};\n"},"./node_modules/react-innertext/index.js":module=>{var reduceJsxToString=function(previous,current){return previous+innerText(current)},innerText=function(jsx){return null===jsx||"boolean"==typeof jsx||void 0===jsx?"":"number"==typeof jsx?jsx.toString():"string"==typeof jsx?jsx:Array.isArray(jsx)?jsx.reduce(reduceJsxToString,""):function(jsx){return Object.prototype.hasOwnProperty.call(jsx,"props")}(jsx)&&Object.prototype.hasOwnProperty.call(jsx.props,"children")?innerText(jsx.props.children):""};innerText.default=innerText,module.exports=innerText},"./node_modules/react-virtual/dist/react-virtual.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{defaultRangeExtractor:()=>defaultRangeExtractor,useVirtual:()=>useVirtual});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var rafId,props=["bottom","height","left","right","top","width"],observedNodes=new Map,run=function run(){var changedStates=[];observedNodes.forEach((function(state,node){var newRect=node.getBoundingClientRect();(function rectChanged(a,b){return void 0===a&&(a={}),void 0===b&&(b={}),props.some((function(prop){return a[prop]!==b[prop]}))})(newRect,state.rect)&&(state.rect=newRect,changedStates.push(state))})),changedStates.forEach((function(state){state.callbacks.forEach((function(cb){return cb(state.rect)}))})),rafId=window.requestAnimationFrame(run)};var useIsomorphicLayoutEffect="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function useRect(nodeRef,initialRect){void 0===initialRect&&(initialRect={width:0,height:0});var _React$useState=react__WEBPACK_IMPORTED_MODULE_0__.useState(nodeRef.current),element=_React$useState[0],setElement=_React$useState[1],_React$useReducer=react__WEBPACK_IMPORTED_MODULE_0__.useReducer(rectReducer,initialRect),rect=_React$useReducer[0],dispatch=_React$useReducer[1],initialRectSet=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);return useIsomorphicLayoutEffect((function(){nodeRef.current!==element&&setElement(nodeRef.current)})),useIsomorphicLayoutEffect((function(){if(element&&!initialRectSet.current){initialRectSet.current=!0;var _rect=element.getBoundingClientRect();dispatch({rect:_rect})}}),[element]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){if(element){var observer=function observeRect(node,cb){return{observe:function observe(){var wasEmpty=0===observedNodes.size;observedNodes.has(node)?observedNodes.get(node).callbacks.push(cb):observedNodes.set(node,{rect:void 0,hasRectChanged:!1,callbacks:[cb]}),wasEmpty&&run()},unobserve:function unobserve(){var state=observedNodes.get(node);if(state){var index=state.callbacks.indexOf(cb);index>=0&&state.callbacks.splice(index,1),state.callbacks.length||observedNodes.delete(node),observedNodes.size||cancelAnimationFrame(rafId)}}}}(element,(function(rect){dispatch({rect})}));return observer.observe(),function(){observer.unobserve()}}}),[element]),rect}function rectReducer(state,action){var rect=action.rect;return state.height!==rect.height||state.width!==rect.width?rect:state}var defaultEstimateSize=function defaultEstimateSize(){return 50},defaultKeyExtractor=function defaultKeyExtractor(index){return index},defaultMeasureSize=function defaultMeasureSize(el,horizontal){return el[horizontal?"offsetWidth":"offsetHeight"]},defaultRangeExtractor=function defaultRangeExtractor(range){for(var start=Math.max(range.start-range.overscan,0),end=Math.min(range.end+range.overscan,range.size-1),arr=[],i=start;i<=end;i++)arr.push(i);return arr};function useVirtual(_ref){var _measurements,_ref$size=_ref.size,size=void 0===_ref$size?0:_ref$size,_ref$estimateSize=_ref.estimateSize,estimateSize=void 0===_ref$estimateSize?defaultEstimateSize:_ref$estimateSize,_ref$overscan=_ref.overscan,overscan=void 0===_ref$overscan?1:_ref$overscan,_ref$paddingStart=_ref.paddingStart,paddingStart=void 0===_ref$paddingStart?0:_ref$paddingStart,_ref$paddingEnd=_ref.paddingEnd,paddingEnd=void 0===_ref$paddingEnd?0:_ref$paddingEnd,parentRef=_ref.parentRef,horizontal=_ref.horizontal,scrollToFn=_ref.scrollToFn,useObserver=_ref.useObserver,initialRect=_ref.initialRect,onScrollElement=_ref.onScrollElement,scrollOffsetFn=_ref.scrollOffsetFn,_ref$keyExtractor=_ref.keyExtractor,keyExtractor=void 0===_ref$keyExtractor?defaultKeyExtractor:_ref$keyExtractor,_ref$measureSize=_ref.measureSize,measureSize=void 0===_ref$measureSize?defaultMeasureSize:_ref$measureSize,_ref$rangeExtractor=_ref.rangeExtractor,rangeExtractor=void 0===_ref$rangeExtractor?defaultRangeExtractor:_ref$rangeExtractor,sizeKey=horizontal?"width":"height",scrollKey=horizontal?"scrollLeft":"scrollTop",latestRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef({scrollOffset:0,measurements:[]}),_React$useState=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),scrollOffset=_React$useState[0],setScrollOffset=_React$useState[1];latestRef.current.scrollOffset=scrollOffset;var outerSize=(useObserver||useRect)(parentRef,initialRect)[sizeKey];latestRef.current.outerSize=outerSize;var defaultScrollToFn=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(offset){parentRef.current&&(parentRef.current[scrollKey]=offset)}),[parentRef,scrollKey]),resolvedScrollToFn=scrollToFn||defaultScrollToFn;scrollToFn=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(offset){resolvedScrollToFn(offset,defaultScrollToFn)}),[defaultScrollToFn,resolvedScrollToFn]);var _React$useState2=react__WEBPACK_IMPORTED_MODULE_0__.useState({}),measuredCache=_React$useState2[0],setMeasuredCache=_React$useState2[1],measure=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){return setMeasuredCache({})}),[]),pendingMeasuredCacheIndexesRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef([]),measurements=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){var min=pendingMeasuredCacheIndexesRef.current.length>0?Math.min.apply(Math,pendingMeasuredCacheIndexesRef.current):0;pendingMeasuredCacheIndexesRef.current=[];for(var measurements=latestRef.current.measurements.slice(0,min),i=min;i<size;i++){var key=keyExtractor(i),measuredSize=measuredCache[key],_start=measurements[i-1]?measurements[i-1].end:paddingStart,_size="number"==typeof measuredSize?measuredSize:estimateSize(i),_end=_start+_size;measurements[i]={index:i,start:_start,size:_size,end:_end,key}}return measurements}),[estimateSize,measuredCache,paddingStart,size,keyExtractor]),totalSize=((null==(_measurements=measurements[size-1])?void 0:_measurements.end)||paddingStart)+paddingEnd;latestRef.current.measurements=measurements,latestRef.current.totalSize=totalSize;var element=onScrollElement?onScrollElement.current:parentRef.current,scrollOffsetFnRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(scrollOffsetFn);scrollOffsetFnRef.current=scrollOffsetFn,useIsomorphicLayoutEffect((function(){if(element){var onScroll=function onScroll(event){var offset=scrollOffsetFnRef.current?scrollOffsetFnRef.current(event):element[scrollKey];setScrollOffset(offset)};return onScroll(),element.addEventListener("scroll",onScroll,{capture:!1,passive:!0}),function(){element.removeEventListener("scroll",onScroll)}}setScrollOffset(0)}),[element,scrollKey]);var _calculateRange=function calculateRange(_ref4){var measurements=_ref4.measurements,outerSize=_ref4.outerSize,scrollOffset=_ref4.scrollOffset,size=measurements.length-1,getOffset=function getOffset(index){return measurements[index].start},start=findNearestBinarySearch(0,size,getOffset,scrollOffset),end=start;for(;end<size&&measurements[end].end<scrollOffset+outerSize;)end++;return{start,end}}(latestRef.current),start=_calculateRange.start,end=_calculateRange.end,indexes=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){return rangeExtractor({start,end,overscan,size:measurements.length})}),[start,end,overscan,measurements.length,rangeExtractor]),measureSizeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(measureSize);measureSizeRef.current=measureSize;var virtualItems=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){for(var virtualItems=[],_loop=function _loop(k,len){var i=indexes[k],item=_extends(_extends({},measurements[i]),{},{measureRef:function measureRef(el){if(el){var measuredSize=measureSizeRef.current(el,horizontal);if(measuredSize!==item.size){var _scrollOffset=latestRef.current.scrollOffset;item.start<_scrollOffset&&defaultScrollToFn(_scrollOffset+(measuredSize-item.size)),pendingMeasuredCacheIndexesRef.current.push(i),setMeasuredCache((function(old){var _extends2;return _extends(_extends({},old),{},((_extends2={})[item.key]=measuredSize,_extends2))}))}}}});virtualItems.push(item)},k=0,len=indexes.length;k<len;k++)_loop(k);return virtualItems}),[indexes,defaultScrollToFn,horizontal,measurements]),mountedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);useIsomorphicLayoutEffect((function(){mountedRef.current&&setMeasuredCache({}),mountedRef.current=!0}),[estimateSize]);var scrollToOffset=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toOffset,_temp){var _ref2$align=(void 0===_temp?{}:_temp).align,align=void 0===_ref2$align?"start":_ref2$align,_latestRef$current=latestRef.current,scrollOffset=_latestRef$current.scrollOffset,outerSize=_latestRef$current.outerSize;"auto"===align&&(align=toOffset<=scrollOffset?"start":toOffset>=scrollOffset+outerSize?"end":"start"),"start"===align?scrollToFn(toOffset):"end"===align?scrollToFn(toOffset-outerSize):"center"===align&&scrollToFn(toOffset-outerSize/2)}),[scrollToFn]),tryScrollToIndex=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(index,_temp2){var _ref3=void 0===_temp2?{}:_temp2,_ref3$align=_ref3.align,align=void 0===_ref3$align?"auto":_ref3$align,rest=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(_ref3,["align"]),_latestRef$current2=latestRef.current,measurements=_latestRef$current2.measurements,scrollOffset=_latestRef$current2.scrollOffset,outerSize=_latestRef$current2.outerSize,measurement=measurements[Math.max(0,Math.min(index,size-1))];if(measurement){if("auto"===align)if(measurement.end>=scrollOffset+outerSize)align="end";else{if(!(measurement.start<=scrollOffset))return;align="start"}var toOffset="center"===align?measurement.start+measurement.size/2:"end"===align?measurement.end:measurement.start;scrollToOffset(toOffset,_extends({align},rest))}}),[scrollToOffset,size]),scrollToIndex=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];tryScrollToIndex.apply(void 0,args),requestAnimationFrame((function(){tryScrollToIndex.apply(void 0,args)}))}),[tryScrollToIndex]);return{virtualItems,totalSize,scrollToOffset,scrollToIndex,measure}}var findNearestBinarySearch=function findNearestBinarySearch(low,high,getCurrentValue,value){for(;low<=high;){var middle=(low+high)/2|0,currentValue=getCurrentValue(middle);if(currentValue<value)low=middle+1;else{if(!(currentValue>value))return middle;high=middle-1}}return low>0?low-1:0}}}]);