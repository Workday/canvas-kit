import {Meta} from '@storybook/addon-docs';

<Meta title="Welcome/Upgrade Guides/v8.0" />

# Canvas Kit 8.0 Upgrade Guide

This guide contains breaking changes in Canvas Kit v8. Please
[reach out](https://github.com/Workday/canvas-kit/issues/new?labels=bug&template=bug.md) if you have
any questions.

- [Codemod](#codemod)
- [General Updates](#general-updates)
  - [Removal of Default Exports](#removal-of-default-exports)
  - [Responsive Styles](#responsive-styles)
- [New Components](#new-components)
  - [Grid](#grid)
  - [Text](#text)
- [Component Deprecations](#component-deprecations)
- [Component Promotions](#component-promotions)
- [Component Updates](#component-updates)
  - [Box](#box)
  - [Menu (Main)](#menu)

## Codemod

Please use our [codemod package](https://github.com/Workday/canvas-kit/tree/master/modules/codemod)
to automatically update your code to work with many of the breaking changes as you upgrade from
Canvas Kit v7 to v8:

```sh
> npx @workday/canvas-kit-codemod v8 [path]
```

> Note: This codemod only works on `.js`, `.jsx`, `.ts`, and `.tsx` extensions. You may need to make
> some manual changes in other file types (`.json`, `.mdx`, `.md`, etc.).

> Note: You may need to run your linter after executing the codemod, as its resulting formatting
> (spacing, quotes, etc.) may not match your project's styling.

**Breaking changes handled by this codemod will be marked with a ðŸ¤–.**

**Please verify all changes made by the codemod. As a safety precaution, we recommend committing the
changes from the codemod as a single isolated commit (separate from other changes) so you can
rollback more easily if necessary.**

[Let us know](https://github.com/Workday/canvas-kit/issues/new?labels=bug&template=bug.md) if you
encounter any issues or use cases that we've missed.

## General Updates

### Removal of Default Exports

We've removed all remaining default exports from our packages to maintain consistency with our newer
(and recently updated) components and systems which favor named exports. The following components
have moved from default exports to named exports. The following components have been updated to
provide named exports instead of default exports (in cases where the component provided both default
and named exports, the default export has been removed).

#### Main (canvas-kit-react)

- AccentIcon
- AppletIcon
- Avatar
- Canvas
- Checkbox
- CountBadge
- FormField
- Graphic
- Icon
- LoadingDots
- Radio
- SegmentedControl
- Select
- SidePanel
- StatusIndicator
- Switch
- Svg
- SystemIcon
- SystemIconCircle
- Table
- TextArea
- TextInput
- Toast
- Tooltip

#### Labs (canvas-kit-labs-react)

- Combobox
- Drawer

#### Preview (canvas-kit-preview-react)

- Breadcrumbs
- ColorPicker
- Menu
- Select
- SidePanel

#### Fonts (canvas-kit-react-fonts)

- fonts

ðŸ¤– The codemod will rewrite your default imports to named imports.

### Responsive Styles

> (PLACEHOLDER) Responsive styles go here (https://github.com/Workday/canvas-kit/issues/1503)

## New Components

### Grid

> (PLACEHOLDER) Introduction to Grid plus link to Grid docs goes here.

### Text

> (PLACEHOLDER) Introduction to Text plus link to Text docs goes here.

## Component Deprecations

### Deprecation Types

There are two types of deprecations: soft and hard.

#### Soft Deprecation

A soft-deprecated component is still available with its full functionality, but it will have been
renamed with a prefix to indicate its soft-deprecated status. It will also include a console warning
announcing its deprecation. This warning will only be triggered on the component's initial render.

Soft-deprecated types and utilities will also be renamed but generally will not trigger a console
warning.

#### Hard Deprecation

A hard-deprecated component or package is no longer available. You will need to follow the method
prescribed in our upgrade guide to update your application. Please
[reach out](https://github.com/Workday/canvas-kit/issues/new?labels=bug&template=bug.md) to our team
directly if you need additional help.

> (PLACEHOLDER) Soft deprecation of Drawer, Menu (Preview), Layout and Column goes here. (https://github.com/Workday/canvas-kit/pull/1747)

## Component Promotions

> (PLACEHOLDER) Promotion of Breadcrumbs from Preview to Main plus addition of List system goes here (https://github.com/Workday/canvas-kit/pull/1724)

## Component Updates

### Box

`Box` now supports the following props to set font and text styles: `fontFamily`, `fontSize`,
`fontStyle`, `fontWeight`, `lineHeight`, `letterSpacing`, `textAlign`, `textDecoration`,
`textTransform`, `textShadow`, `whiteSpace`, and `wordBreak`.

```tsx
// v7
const StyledBox = styled(Box)({
  fontFamily: 'monospace',
  fontSize: type.properties.fontSizes[16],
  fontWeight: type.properties.fontWeights.medium
})

<StyledBox />

// v8
<Box fontFamily="monospace" fontSize={16} fontWeight="medium" />
```

### Menu (Main)

The depth value of `Menu.Card` has been updated from `1` to `3`. This is a visually breaking change.

### Segmented Control

> (PLACEHOLDER) New compound Segmented Control goes here (https://github.com/Workday/canvas-kit/issues/1777)
