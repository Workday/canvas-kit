import {Meta, ArgsTable} from '@storybook/addon-docs';
import {Box} from '@workday/canvas-kit-react/layout';
import {useResizeObserver, useResponsiveContainerStyles} from '@workday/canvas-kit-react/common';
import {ResponsiveContainer} from './examples/ResponsiveStyles';
import {ResponsiveViewport} from './examples/ResponsiveViewport';

<Meta title="Hooks and Utilities/Responsive Styling" />

# Responsive Styling

Responsive styling is an approach to web development that adjusts layout and appearance based on the
device's viewport size or an element's container size.

## What is Responsive Styling?

Responsive Styling it is a term used to describe an approach to web design or a set of best
practices, used to create a layout that can _respond_ to the device being used to view the content.

Read more about the history of
[Responsive Design](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Responsive_Design).

### Container vs Viewport

There are two ways we will look at responsive styling below. They are container-based and
viewport-based responsive styling.

> Using container-based responsive styling, we will measure the size of the container the element is
> in and apply styles based on the size of that container.

> Using viewport-based responsive styling, we will measure the size of the user's viewport and apply
> styles based on the size of that viewport.

If you are measuring a user's viewport size, then you should be using viewport-based responsive
styling.

If you only want to measure the size of a container, then you should be using container-based
responsive styling.

> **Note**: A container's size can be affected by surrounding containers or the viewport size.

### Canvas Breakpoints

In Canvas Kit, there are a set of breakpoints:

| Zero  | Small   | Medium  | Large    | Extra Large |
| ----- | ------- | ------- | -------- | ----------- |
| > 0px | > 320px | > 768px | > 1024px | > 1440px    |

> Zero: This is applied from 0 - 319px

> Small: This is applied from 320px - 767px

> Medium: This is applied from 768px - 1023px

> Large: This is applied from 1024px - 1439px

> Extra Large: This is applied from 1440px and up

These are the breakpoints we will use when we apply styles based on the size of a container or
viewport.

## Container-based Responsive Styling

In the interactive example below, when the dropdown's value is updated, the container size will
change to match the size shown in the dropdown.

<ExampleCodeBlock code={ResponsiveContainer} />

This example uses the following hooks:

- `useResizeObserver` provides the width (and height) of the container.

- `useResponsiveContainerStyles` allows you to create container-based responsive styles with
  objects. This hook accepts three arguments: style objects, container width, and theme (optional).
  Each style object accepts keys corresponding to the following sizes: `zero`, `s`, `m`, `l` and
  `xl`. These sizes represent [Canvas breakpoints](#canvas-breakpoints). The sizes act like
  `min-width`. For example, if you want to apply styles from `medium` and up, then you would write
  those styles under `m`.

## Viewport-based Responsive Styling

The viewport is the user's visible area of a web page (varies with screen size).

We can use media queries to run a series of tests that will measure the screen size or resolution
and apply CSS styles specifically to an element.

```css
@media screen and (min-width: 800px) {
  .container {
    margin: 1em 2em;
  }
}
```

In the interactive example below, styles are applied based on the size of the user's viewport using
our breakpoint utilities: `up()`, `down()`, `between()` and `only()`. Note the use of `up()` and
`down()` near the top of the example code. Adjust the width of your browser to see the layout adjust
to the available width.

<ExampleCodeBlock code={ResponsiveViewport} />

### Breakpoint Utilities

We have four utilities to apply viewport-based responsive styling: `up()`, `down()`, `between()`,
and `only()`. Each has a specific role in applying viewport-based responsive styles.

`up()` - Returns a media query above the `min-width` for the range of a given breakpoint. Given a
`start` breakpoint key `("zero", "s", "m", "l", "xl")`, this function returns a media query (string)
using a `min-width`. See example below.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';
const theme = useTheme();
const {up} = theme.canvas.breakpoints;
const mediaQuery = up('l'); // Returns '@media (min-width: 1024px)'
const styles = {
  [mediaQuery]: {
    padding: space.m,
  },
};
```

`down()` - Returns a media query below the `max-width` for the range of a given breakpoint. Given an
`end` breakpoint key `("zero", "s", "m", "l", "xl")`, this function returns a media query (string)
using a `max-width`.

> **Note**: This function subtracts `0.5px` from the next breakpoint value to prevent collisions.
> For example, `breakpoints.values.s`, has a `min-width` of `320px`, and the `max-width` is
> `767.5px`). If the `xl` breakpoint is provided, this function returns a media query with only a
> `min-width` of `0`, as seen in the second example below. See example below.

```ts
import { useTheme } from '@workday/canvas-kit-react/common';
import { space } from '@workday/canvas-kit-react/tokens';
 *
const theme = useTheme();
const { down } = theme.canvas.breakpoints;
const mediaQuery = down('m'); // Returns '@media (max-width: 1023.5px)'
const styles = {
  [mediaQuery]: {
    padding: space.m,
  }
};
```

This example uses the `xl` breakpoint and only adds a `min-width` of `0` to the media query.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';
const theme = useTheme();
const {down} = theme.canvas.breakpoints;
const mediaQuery = down('xl'); // Returns '@media (min-width: 0)'
const styles = {
  [mediaQuery]: {
    padding: space.m,
  },
};
```

`between()` - Returns a media query between two given breakpoints. Given `start` and `end`
breakpoint keys ("zero", "s", "m", "l", "xl"), this function returns a media query (string) using a
min-width and max-width.

> **Note**: This function subtracts `0.5px` from the next breakpoint value to prevent collisions.
> For example, `breakpoints.values.s`, has a `min-width` of `320px`, and the `max-width` is
> `767.5px`).

If the `xl` breakpoint is provided, this function returns a media query with only a `min-width`, as
seen in the second example below.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';
const theme = useTheme();
const {between} = theme.canvas.breakpoints;
// Returns '@media (min-width: 320px) and (max-width: 1023.5px)'
const mediaQuery = between('s', 'm');
const styles = {
  [mediaQuery]: {
    padding: space.s,
  },
};
```

This example uses `xl` as the `end` breakpoint and only adds a min-width to the media query.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';
const theme = useTheme();
const {between} = theme.canvas.breakpoints;
const mediaQuery = between('m', 'xl'); // Returns '@media (min-width: 768px)'
const styles = {
  [mediaQuery]: {
    padding: space.s,
  },
};
```

`only()` - Returns a media query with a `min-width` and `max-width` for a given breakpoint. Given a
breakpoint key ("zero", "s", "m", "l", "xl"), this function returns a media query (string) using a
`min-width` and `max-width`.

> **Note**: This function subtracts `0.5px` from the next breakpoint value to prevent collisions.
> For example, `breakpoints.values.s`, has a `min-width` of `320px`, and the `max-width` is
> `767.5px`).

If the `xl` breakpoint is provided, this function returns a media query with only a `min-width` of
`1440px`, as seen in the second example below.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';

const theme = useTheme();
const {only} = theme.canvas.breakpoints;
const mediaQuery = only('s'); // Returns '@media (min-width: 320px) and (max-width: 767.5px)'
const styles = {
  [mediaQuery]: {
    padding: space.s,
  },
};
```

This example uses the `xl` breakpoint and only adds a `min-width` of `1440px` to the media query.

```ts
import {useTheme} from '@workday/canvas-kit-react/common';
import {space} from '@workday/canvas-kit-react/tokens';

const theme = useTheme();
const {only} = theme.canvas.breakpoints;
const mediaQuery = only('xl'); // Returns '@media (min-width: 1440px)'
const styles = {
  [mediaQuery]: {
    padding: space.s,
  },
};
```
