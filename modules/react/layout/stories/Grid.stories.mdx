import {Meta, ArgsTable} from '@storybook/addon-docs';

import {Grid, GridItem} from '@workday/canvas-kit-react/layout';
// examples
import {GridLayout} from './examples/Grid/GridLayout';
import {UIExample} from './examples/Grid/UIExample';
import {GridLayoutInteractive} from './examples/Grid/GridLayoutInteractive';
import {GridStyle} from './examples/PropTables.splitprops.tsx';
import {GridStyleProps} from '../lib/utils/grid';
import {GridItemStyleProps} from '../lib/utils/gridItem';

<Meta title="Components/Containers/Layout/Grid" component={Grid} />

# Canvas Kit Grid

`Grid` is a low-level layout component that provides a common, ergonomic API for building
two-dimensional layouts (rows and columns) with
[CSS Grid](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Grids).

If you want to see how Flexbox and Grid can
[work together](https://css-tricks.com/css-grid-replace-flexbox/).

## Installation

```sh
yarn add @workday/canvas-kit-react
```

## Usage

### Basic Example

Below is a basic layout built with `Grid`. We created four components: `Header`, `SideBar`,
`BodyContent` and `Footer`. We also used those names for their respective `gridArea` props. Then we
can use those names in the parent component, `UIExample`, to organize the UI however we want. This
allows the parent container to control how its children render. For page layouts, Workday typically
uses a 12 column grid. In the example below, the Sidebar is 3 columns and the Body Content is 9
columns.

> Note: You can learn more about CSS Grid's `gridArea` and `gridTemplateAreas`
> [here](https://developer.mozilla.org/en-US/docs/Web/CSS/grid-template-areas).

<ExampleCodeBlock code={UIExample} />

### Using Grid Items

In the example above we nested `Grid` components to create our layout, and we controlled the layout
structure from the top-level `Grid` container. That's a perfectly valid approach. However, we can
also use `Grid.Item` components to allow child cells to have more control. While any direct child of
a `Grid` component is implicitly a grid item, `Grid.Item` provides special CSS Grid Item style props
that allow you to have more control over how and where each item renders.

To demonstrate this behavior, the example below has a `Grid` container with nine cells. The eight
`soap500` cells are `Grid` components, and the `peach300` cell is a `Grid.Item`. We can use the
`Grid.Item` style props `gridRowStart` and `gridColumnStart` to manipulate where the cell renders.
You can use the `Row` and `Column` buttons to manipulate these props and see the `Grid.Item`'s
position adjust accordingly.

> Note: This example is solely intended to demonstrate the `Grid.Item`'s functionality and is NOT
> considered an accessibility best practice. Visually reordering content does not change the order
> it is read by a screen reader or the tab order. You can learn more about CSS Grid layout and
> accessibility
> [here](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/CSS_Grid_Layout_and_Accessibility).

<ExampleCodeBlock code={GridLayoutInteractive} />

Let's look at another `Grid.Item` example. Below, we have a `Grid` container with two rows: one with
seven elements and the other with two elements. This example is to show how a user can use the
`<Grid.Item/>` component to wrap a `Grid` component. This would allow a user to have access to the
child props of `Grid.Item` to place a layout where needed. The row with elements 3 - 7 is put before
the 1 & 2 elements since that layout is wrapped by the `Grid.Item` component.

<ExampleCodeBlock code={GridLayout} />

### Using Grid vs. Flex vs. Box

`Box` is the underlying layout component that `Grid` and `Flex` are built upon. So `Grid` and `Flex`
have access to all `BoxProps`. But `Grid` and `Flex` have their own specific style props that map to
CSS Grid and Flexbox properties, respectively. When using these components to build layouts, it is
not a matter of choosing `Grid` _or_ `Flex` _or_ `Box`, but rather deciding how to use them
together. They are intended to be complementary not exclusionary. With that said, here are some
general rules for when to use which:

- Use `Grid` for building **two-dimensional** layouts (rows AND columns).
- Use `Flex` for building **one-dimensional** layouts (a row OR a column).
- Use `Box` for generic containers that don't need CSS Flexbox or Grid.

## Components

### Grid

Grid is a container component for creating two-dimensional layouts with CSS Grid. It has special
style props that map to CSS Grid style properties to provide a common, ergonomic API for building
layouts.

#### Usage

```tsx
<Grid grid gridTemplateColumns="1fr 2fr 1fr" gridGap={space.s}>
  <div>Implicit grid item 1</div>
  <div>Implicit grid item 2</div>
  <div>Implicit grid item 3</div>
</Grid>
```

#### Props

As previously mentioned, `Grid` is built on top of `Box` and has access to all its props, including
[grid container properties](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Basic_Concepts_of_Grid_Layout#the_grid_container)
through style props as well. Here are the grid container props:

<ArgsTable of={GridStyleProps} />

### Grid.Item

`Grid.Item` is a subcomponent of Grid. It has specific grid item style props that map to CSS Grid
Item properties. This allows you greater control over how child components render in your layout.

#### Usage

```tsx
<Grid gridGap={space.s}>
  <Grid.Item gridColumn="1 / span 2">First item</Grid.Item>
  <Grid.Item gridRow="1 / span 2">Second item</Grid.Item>
  <Grid.Item gridColumn="1 / span 2" gridRow="2">
    Third item
  </Grid.Item>
</Grid>
```

#### Props

<ArgsTable of={GridItemStyleProps} />
