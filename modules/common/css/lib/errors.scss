// Errors
@mixin wdc-form-validation($_type) {
  $_borderColor: $wdc-color-black-pepper-100 !default; // This should not be used, it is necessary for the @if / @else if to.

  @if ($_type=='error') {
    $_borderColor: $wdc-color-error;
  }

  @else if ($_type=='alert') {
    $_borderColor: $wdc-color-alert-light;
  }

  & {
    border-color: $_borderColor;
    box-shadow: inset 0 0 0 1px $_borderColor;

    @if ($_type=='alert') {
      border-color: $wdc-color-alert-dark;
      box-shadow: inset 0 0 0 2px $_borderColor;
    }
  }

  &.wdc-form-checkbox:not(.wdc-form-checked):not(:checked)+.wdc-form-label:before {
    border-color: $_borderColor;
  }

  &.wdc-form-hover,
  &:hover {
    & {
      border-color: $_borderColor;

      @if ($_type=='alert') {
        border-color: $wdc-color-alert-dark;
        box-shadow: inset 0 0 0 2px $_borderColor;
      }
    }
  }

  &.wdc-form-focus:not([disabled]):not(.wdc-form-disabled),
  &:focus:not([disabled]):not(.wdc-form-disabled) {
    & {
      outline: none;
      border-color: $_borderColor;

      & {
        box-shadow: inset 0 0 0 1px $_borderColor, 0 0 0 2px $wdc-color-input-background,
          0 0 0 4px $wdc-color-common-focus-outline;
      }

      @if ($_type=='alert') {
        border-color: $wdc-color-alert-dark;
        box-shadow: inset 0 0 0 2px $_borderColor;

        & {
          box-shadow: inset 0 0 0 2px $_borderColor, 0 0 0 2px $wdc-color-input-background,
            0 0 0 4px $wdc-color-common-focus-outline;
        }
      }
    }

    &.wdc-form-checkbox+.wdc-form-label:before {
      border-color: $_borderColor;
      box-shadow: 0 0 0 2px $wdc-color-input-background, 0 0 0 4px $wdc-color-common-focus-outline;
    }

    &.wdc-form-checkbox:checked,
    &.wdc-form-checkbox.wdc-form-checked {
      +.wdc-form-label:before {
        border-color: $wdc-color-common-focus-outline;
      }
    }
  }
}

@mixin wdc-form-error {
  @include wdc-form-validation('error');
}

.wdc-form-error {

  .wdc-form-textinput,
  &.wdc-form-textinput {
    input {
      @include wdc-form-error;
    }
  }

  .wdc-form-textarea,
  &.wdc-form-textarea {
    textarea {
      @include wdc-form-error;
    }
  }

  .wdc-form-select,
  &.wdc-form-select {
    select {
      @include wdc-form-error;
    }
  }
}

@mixin wdc-form-alert {
  @include wdc-form-validation('alert');
}

.wdc-form-alert {

  .wdc-form-textinput,
  &.wdc-form-textinput {
    input {
      @include wdc-form-alert;
    }
  }

  .wdc-form-textarea,
  &.wdc-form-textarea {
    textarea {
      @include wdc-form-alert;
    }
  }

  .wdc-form-select,
  &.wdc-form-select {
    select {
      @include wdc-form-alert;
    }
  }
}

// Messages

.wdc-form-hint-message {
  @include wdc-type();
  @include wdc-type-body();
  font-size: 13px;
  margin-top: $wdc-spacing-xxs;

  strong,
  b {
    font-weight: 500;
  }
}

// Form Field Errors
@svg-load errorIcon url(#{$_wdc-form-icons-path}/wd-icon-exclamation-circle.svg) {
  .wd-icon-fill {
    fill: $wdc-color-error;
  }

  .wd-icon-accent {
    fill: $wdc-color-error;
  }

  .wd-icon-background {
    fill: $wdc-color-french-vanilla-100;
  }
}

@svg-load alertIcon url(#{$_wdc-form-icons-path}/wd-icon-exclamation-triangle.svg) {
  .wd-icon-fill {
    fill: $wdc-color-alert;
  }

  .wd-icon-accent {
    fill: $wdc-color-alert;
  }

  .wd-icon-background {
    fill: $wdc-color-french-vanilla-100;
  }
}

@mixin wdc-form-field-validation($_type) {
  $_boxShadow: $wdc-color-black-pepper-100 !default; // This should not be used, it is necessary for the @if / @else if to.

  @if ($_type=='error') {
    $_boxShadow: $wdc-color-error 0px 0px 0px 2px inset;
  }

  @else if ($_type=='alert') {
    $_boxShadow: rgb(192, 108, 0) 0px 0px 0px 1px inset,
      rgb(255, 161, 38) 0px 0px 0px 3px inset;
  }

  .wdc-form-group &.wdc-form-group-fields {
    border-radius: 4px;
    box-shadow: $_boxShadow;
    box-sizing: border-box;
    display: inline-block;
    font-family: sans-serif;
    margin: -2px -8px;
    padding: 2px 8px;
    margin-top: -10px;
    text-align: left;
  }
}

@mixin wdc-form-field-error {
  @include wdc-form-field-validation('error');
}

.wdc-form-field-error {
  @include wdc-form-field-error();
}

@mixin wdc-form-field-alert {
  @include wdc-form-field-validation('alert');
}

.wdc-form-field-alert {
  @include wdc-form-field-alert();
}

@mixin wdc-form-inline-labels-errors() {
  .wdc-form-field-wrapper {
    position: relative;

    // Case where there's no label on the left
    &>.wdc-form-field {
      margin-left: $wdc-form-inline-label-width + $wdc-spacing-s;
    }

    &>.wdc-form-label+.wdc-form-field {
      margin-left: 0;
    }
  }

  .wdc-form-label {
    // Make room for error/alert icon
    min-width: $wdc-form-inline-label-width - $wdc-spacing-m;
    width: $wdc-form-inline-label-width - $wdc-spacing-m;
    margin-right: $wdc-spacing-s + $wdc-spacing-m;
  }

  .wdc-form-group-fields {
    margin-bottom: $wdc-spacing-m;

    &+.wdc-form-hint-message,
    &+.wdc-form-hint-message {
      position: absolute;
      bottom: 0;
      left: $wdc-form-inline-label-width+$wdc-spacing-s + $wdc-spacing-s;
    }
  }
}

.wdc-form-inline-labels {
  @include wdc-form-inline-labels-errors();
}
