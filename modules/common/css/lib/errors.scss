// Errors
@mixin wdc-form-validation($_type) {

  $_borderColor: #000 !default;

  @if ($_type=='error') {
    $_borderColor: $wdc-color-error;
  }

  @else if ($_type=='alert') {
    $_borderColor: $wdc-color-alert-light;
  }

  &.wdc-form-textarea,
  &.wdc-form-textinput,
  &.wdc-form-select {
    border-color: $_borderColor;
    box-shadow: inset 0 0 0 1px $_borderColor;

    @if ($_type=='alert') {
      border-color: $wdc-color-alert-dark;
      box-shadow: inset 0 0 0 2px $_borderColor;
    }
  }

  &.wdc-form-checkbox:not(.wdc-form-checked):not(:checked)+.wdc-form-label:before {
    border-color: $_borderColor;
  }

  &.wdc-form-hover,
  &:hover {

    &.wdc-form-textarea,
    &.wdc-form-textinput,
    &.wdc-form-select {
      border-color: $_borderColor;

      @if ($_type=='alert') {
        border-color: $wdc-color-alert-dark;
        box-shadow: inset 0 0 0 2px $_borderColor;
      }
    }
  }

  &.wdc-form-focus:not([disabled]):not(.wdc-form-disabled),
  &:focus:not([disabled]):not(.wdc-form-disabled) {

    &.wdc-form-textarea,
    &.wdc-form-textinput,
    &.wdc-form-select {
      outline: none;
      border-color: $_borderColor;

      @if ($_type=='alert') {
        border-color: $wdc-color-alert-dark;
        box-shadow: inset 0 0 0 2px $_borderColor;
      }

      &.wdc-form-error {
        box-shadow: inset 0 0 0 1px $_borderColor, 0 0 0 2px $wdc-color-input-background,
          0 0 0 4px $wdc-color-common-focus-outline;
      }

      &.wdc-form-alert {
        box-shadow: inset 0 0 0 2px $_borderColor, 0 0 0 2px $wdc-color-input-background,
          0 0 0 4px $wdc-color-common-focus-outline;
      }
    }

    &.wdc-form-checkbox+.wdc-form-label:before {
      border-color: $_borderColor;
      box-shadow: 0 0 0 2px $wdc-color-input-background, 0 0 0 4px $wdc-color-common-focus-outline;
    }

    &.wdc-form-checkbox:checked,
    &.wdc-form-checkbox.wdc-form-checked {
      +.wdc-form-label:before {
        border-color: $wdc-color-common-focus-outline;
      }
    }
  }
}

@mixin wdc-form-error {
  @include wdc-form-validation("error");
}

.wdc-form-error {
  @include wdc-form-error();
}

@mixin wdc-form-alert {
  @include wdc-form-validation("alert");
}

.wdc-form-alert {
  @include wdc-form-alert();
}

// Messages

.wdc-form-hint-message {
  @include wdc-type();
  @include wdc-type-body();
  font-size: 13px;
  margin-top: $wdc-spacing-xxs;

  strong,
  b {
    font-weight: 500;
  }
}

// Form Field Errors
@svg-load errorIcon url(#{$_wdc-form-icons-path}/wd-icon-exclamation-circle.svg) {
  .wd-icon-fill {
    fill: $wdc-color-error;
  }

  .wd-icon-accent {
    fill: $wdc-color-error;
  }

  .wd-icon-background {
    fill: $wdc-color-french-vanilla-100;
  }
}

@svg-load alertIcon url(#{$_wdc-form-icons-path}/wd-icon-exclamation-triangle.svg) {


  .wd-icon-fill {
    fill: $wdc-color-alert;
  }

  .wd-icon-accent {
    fill: $wdc-color-alert;
  }

  .wd-icon-background {
    fill: $wdc-color-french-vanilla-100;
  }
}

@mixin wdc-form-field-validation($_icon, $_borderColor) {
  $_wdc-form-error-icon-top: 8px;
  $_wdc-form-error-icon-right: ($wdc-form-error-icon-size + $wdc-form-error-spacing);

  .wdc-form-field,
  &.wdc-form-group-fields {
    position: relative;

    &>.validation-icon {
      position: absolute;
      top: $_wdc-form-error-icon-top;
      left: 280-$_wdc-form-error-icon-right;
      content: '';
      width: $wdc-form-error-icon-size;
      height: $wdc-form-error-icon-size;
      background: svg-inline($_icon) center no-repeat;
      pointer-events: none;
    }
  }

  &.wdc-form-field-error-inline .wdc-form-field:after {
    top: -1px;
  }

  &.wdc-form-group-fields {
    padding: $wdc-spacing-s;
    border-radius: 3px;

    &:after {
      top: 50%;
      transform: translateY(-50%);
    }
  }

  &.wdc-form-group-fields {
    border: 1px solid $wdc-color-error;

    .wdc-form-field {
      &:after {
        display: none;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

@mixin wdc-form-field-error {
  @include wdc-form-field-validation(errorIcon, $wdc-color-error);
}

.wdc-form-field-error {
  @include wdc-form-field-error();
}

@mixin wdc-form-field-alert {
  @include wdc-form-field-validation(alertIcon, $wdc-color-alert);
}

.wdc-form-field-alert {
  @include wdc-form-field-alert();
}

@mixin wdc-form-inline-labels-errors() {
  .wdc-form-field-wrapper {
    position: relative;

    // Case where there's no label on the left
    &>.wdc-form-field {
      margin-left: $wdc-form-inline-label-width + $wdc-spacing-s;
    }

    &>.wdc-form-label+.wdc-form-field {
      margin-left: 0;
    }
  }

  .wdc-form-label {
    // Make room for error/alert icon
    min-width: $wdc-form-inline-label-width - $wdc-spacing-m;
    width: $wdc-form-inline-label-width - $wdc-spacing-m;
    margin-right: $wdc-spacing-s + $wdc-spacing-m;
  }

  .wdc-form-group-fields {
    margin-bottom: $wdc-spacing-m;

    &+.wdc-form-hint-message,
    &+.wdc-form-hint-message {
      position: absolute;
      bottom: 0;
      left: $wdc-form-inline-label-width + $wdc-spacing-s;
    }
  }
}

.wdc-form-inline-labels {
  @include wdc-form-inline-labels-errors();
}
