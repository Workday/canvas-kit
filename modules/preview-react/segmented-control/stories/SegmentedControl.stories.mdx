import {Meta} from '@storybook/addon-docs';

import {SegmentedControl} from '@workday/canvas-kit-preview-react/segmented-control';
import {Specifications} from '@workday/canvas-kit-docs';

import {Basic} from './examples/Basic';
import {Disabled} from './examples/Disabled';
import {TextAndIcon} from './examples/TextAndIcon';
import {TextOnly} from './examples/TextOnly';
import {Sizes} from './examples/Sizes';
import {Vertical} from './examples/Vertical';
import {RTL} from './examples/RTL';
import {Dynamic} from './examples/Dynamic';
import {
  SegmentedControlModelConfigComponent,
  SegmentedControlStateComponent,
  SegmentedControlEventsComponent,
} from './SegmentedControlModel.splitprops.tsx';

<Meta title="Preview/Segmented Control/React" component={SegmentedControl} />

# Canvas Kit Segmented Control

Segmented Control is a
[compound component](/getting-started/for-developers/resources/compound-components/) that represents
a linear group of two, three or four buttons allowing the selection of a specific value.

[> Workday Design Reference](https://design.workday.com/components/buttons/action-bar)

## Installation

```sh
yarn add @workday/canvas-kit-preview-react
```

## Usage

### Basic Example

In a basic example of a `SegmentedControl` there are four icon buttons in group. Each button is
paired with a tooltip to explain the button function in text. Default values of `SegmentedControl`
are specified for size (as `medium`) and orientation (as `horizontal`). All buttons should have the
same type and only one of them can be active at a time.

`SegmentedControl` includes a container `SegmentedControl` component and the following
subcomponents: `SegmentedControl.List` which contains a `SegmentedControl.Item`.

<ExampleCodeBlock code={Basic} />

### Variations Example

`SegmentedControl` can be used with diferent buttons: text only, text with icon or icon only.

#### Text And Icon

<ExampleCodeBlock code={TextAndIcon} />

#### Text Only

<ExampleCodeBlock code={TextOnly} />

#### Icon Only (vertical)

`SegmentedControl` icon only buttons can be placed horizontally or vertically. Be aware that
vertical orientation must be used only for icon only buttons.

<ExampleCodeBlock code={Vertical} />

### Sizes Example

`SegmentedControl` has three different size: `small`, `medium` (default size) and `large`.

<ExampleCodeBlock code={Sizes} />

### Disabled Example

`SegmentedControl`can be disabled by adding`disabled` prop to the whole container. This will disable
all buttons.

<ExampleCodeBlock code={Disabled} />

### RTL Example

`SegmentedControl` supports right-to-left languages when specified in the `CanvasProvider` `theme`.

<ExampleCodeBlock code={RTL} />

### Dynamic Items Example

The `SegmentedControl.Item` component takes in an optional `index` property if you want to specify
the position of a button. If not defined, by default it will append items to the end. In this
example, our items are stored as an array in the state.

<ExampleCodeBlock code={Dynamic} />

## Components

### SegmentedControl

#### Usage

`SegmentedControl` is a container component that is responsible for creating a
`SegmentedControlModel` and sharing it with its subcomponents using React context. It does not
represent a real element.

```tsx
<SegmentedControl items={[]}>{/* Child components */}</SegmentedControl>
```

Alternatively, you may pass in a model using the hoisted model pattern.

```tsx
const model = useSegmentedControlModel({
  items: [],
});

<SegmentedControl model={model}>{/* Child components */}</SegmentedControl>;
```

#### Props

Note that if you pass in a `model` configured with `useSegmentedControlModel`, configuration props
passed to `SegmentedControl` will be ignored.

<ArgsTable of={SegmentedControl} />

### SegmentedControl.List

#### Usage

`SegmentedControl.List` is a `Stack` element. It is a container for `SegmentedControl.Item`
subcomponents.

```tsx
<SegmentedControl.List>{/* SegmentedControl.Items */}</SegmentedControl.List>
```

#### Props

`SegmentedControl.List` requires to set `aria-label` prop. Undocumented props are spread to the
underlying `Stack` element.

<ArgsTable of={SegmentedControl.List} />

### SegmentedControl.Item

#### Usage

`SegmentedControl.Item` is a `button` element built on `BaseButton`. `SegmentedControl.Item` has a
`data-id` prop to handle `onSelect` properly.

```tsx
<SegmentedControl.Item data-id="table">Table</SegmentedControl.Item>
```

#### Props

Undocumented props are spread to the underlying `BaseButton` component.

<ArgsTable of={SegmentedControl.Item} />

## Model

If `SegmentedControl` was stripped of all its markup, attributes, and styling, what would remain is
the [model](/getting-started/for-developers/resources/compound-components/#models). The model is an
object composed of two parts: `state` which describes the current snapshot in time of the component
and `events` which describes events that can be sent to the model.

By default, `SegmentedControl` will create a model and share it internally with its subcomponents
using React context. Alternatively, if you need direct access to the model's `state` and `events`
outside of the `SegmentedControl` component, you may configure your own model with
`useSegmentedControlModel` and pass it to `SegmentedControl` via a pattern called
[hoisting the model](/getting-started/for-developers/resources/compound-components/#configuring-a-model).

```tsx
const model = useSegmentedControlModel({
  items: [],
  initialValue: 'table',
});

<SegmentedControl model={model}>{/* Child components */}</SegmentedControl>;
```

### Config

`useSegmentedControlModel` accepts a configuration object with the following properties and returns
a `SegmentedControlModel` with `state` and `events` properties.

<ArgsTable of={SegmentedControlModelConfigComponent} />

### State

The `SegmentedControlModel` `state` is an object with the following properties.

<ArgsTable of={SegmentedControlStateComponent} />

### Events

The `SegmentedControlModel` `events` is an object with the following properties.

<ArgsTable of={SegmentedControlEventsComponent} />

## Specifications

<Specifications file="SegmentedControl.spec.ts" name="SegmentedControl" />
