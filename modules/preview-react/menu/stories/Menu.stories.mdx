import {Meta} from '@storybook/addon-docs/blocks';
import {Specifications} from '@workday/canvas-kit-docs';
import {Menu, MenuItem} from '@workday/canvas-kit-preview-react/menu';

import {Basic} from './examples/Basic';
import {ContextMenu} from './examples/ContextMenu';
import {CustomMenuItem} from './examples/CustomMenuItem';
import {Icons} from './examples/Icons';
import {ManyItems} from './examples/ManyItems';

<Meta title="Preview/Menu/React" component={Menu} />

# Canvas Kit Menu

`Menu` displays a list of options when triggered by an action or UI element like an icon or button.

[> Workday Design Reference](https://design.workday.com/components/popups/menus)

## Installation

```sh
yarn add @workday/canvas-kit-preview-react
```

## Usage

### Basic Example

`Menu` is typically triggered by an action such as pressing a button. Here's an example of how you
might implement that behavior using a [`Popup`](/components/popups/popup/).

<ExampleCodeBlock code={Basic} />

`Menu` will automatically assign focus to itself when it appears provided you set the `isOpen` prop
correctly, so you do **not** need to use the `useInitialFocus` `Popup` hook. You **will**, however,
need to use `useReturnFocus` to return focus back to the triggering button after closing the `Menu`.

`Menu` follows the
[Actions Menu pattern](https://www.w3.org/TR/wai-aria-practices/examples/menu-button/menu-button-actions-active-descendant.html)
using `aria-activedescendant`. Below is table of supported keyboard shortcuts and associated
actions.

| Key                | Action                                                                                                                                           |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `Enter` or `Space` | Activates the menu item and then closes the menu                                                                                                 |
| `Escape`           | Closes the menu                                                                                                                                  |
| `Up Arrow`         | Moves focus to the previous menu item – if focus is on first menu item, it moves focus to the last menu item                                     |
| `Down Arrow`       | Moves focus to the next menu item – if focus is on last menu item, it moves focus to the first menu item                                         |
| `Home`             | Moves focus to the first menu item                                                                                                               |
| `End`              | Moves focus to the last menu item                                                                                                                |
| `A-Z / a-z`        | Moves focus to the next menu item with a label that starts with the typed character if such an menu item exists – otherwise, focus does not move |

Note that although `Menu` includes support for keyboard shortcuts for the menu itself, you'll need
to add your own keyboard handling and aria attributes to the triggering button.

### Context Menu

<ExampleCodeBlock code={ContextMenu} />

### Custom Menu Item

`Menu` renders a styled `<ul>` element with a role of `menu`, and `MenuItem`s are `<li>` elements
with the correct attributes to ensure they are accessible. If you choose to implement your own
custom menu items, be sure to use semantic `<li>` elements with the following attributes:

- `role="menuitem"`
- `tabindex={-1}`

Below is an example:

<ExampleCodeBlock code={CustomMenuItem} />

### Icons

<ExampleCodeBlock code={Icons} />

### Many Items

<ExampleCodeBlock code={ManyItems} />

## Components

### Menu

#### Usage

`Menu` renders a styled `<ul role="menu">` element within a [`Card`](/components/containers/card/)
and follows the
[Active Menu pattern](https://www.w3.org/TR/wai-aria-practices/examples/menu-button/menu-button-actions-active-descendant.html)
using `aria-activedescendant`.

#### Props

Undocumented props are spread to the underlying `<ul>` element.

<ArgsTable of={Menu} />

### MenuItem

#### Usage

`MenuItem` renders an `<li>` element with the correct attributes to ensure it is accessible. If you
choose to implement your own custom menu items, be sure to use semantic `<li>` elements with the
following attributes:

- `role="menuitem"`
- `tabindex={-1}`
- `id`s following this pattern: `${MenuId}-${index}`

#### Props

Undocumented props are spread to the underlying `<li>` element.

<ArgsTable of={MenuItem} />

## Specifications

<Specifications file="Menu.spec.ts" name="Menu" />
